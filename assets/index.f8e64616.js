var e=Object.defineProperty,t=("undefined"!=typeof require&&require,(t,n,i)=>(((t,n,i)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i})(t,"symbol"!=typeof n?n+"":n,i),i));import{e as n,w as i,S as o,i as s,s as a,u as r,g as l,a as c,t as p,b as h,c as d,d as u,f as m,h as w,j as f,k as y,l as g,m as v,n as $,o as b,p as x,q as E,r as S,v as M,x as P,y as T,z,A as X,B as H,C as k,D as Y,E as j,F as _,G as I,H as R,I as Z,J as C}from"./vendor.ee6e0dd8.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const L=new n.exports.EventEmitter;var D,Q;(Q=D||(D={})).update="update",Q.resize="resize",Q.updateScenesSize="updateScenesSize",Q.addObject="addObject",Q.onPointerDown="onPointerDown",Q.onPointerUp="onPointerUp",Q.onPointerMove="onPointerMove",Q.onDoubleClick="onDoubleClick",Q.onKeyDown="onKeyDown",Q.onKeyUp="onKeyUp";const A=i(null),O=i(null);function W(e){let t;const n=e[3].default,i=E(n,e,e[2],null);return{c(){i&&i.c()},m(e,n){i&&i.m(e,n),t=!0},p(e,o){i&&i.p&&(!t||4&o)&&r(i,n,e,e[2],t?c(n,e[2],o,null):l(e[2]),null)},i(e){t||(p(i,e),t=!0)},o(e){h(i,e),t=!1},d(e){i&&i.d(e)}}}function F(e){let t,n,i,o,s,a,r,l,c,E=e[0]&&W(e);return{c(){t=d("div"),n=d("div"),i=d("i"),s=u(e[1]),a=m(),E&&E.c(),w(i,"class",o="float-left overflow-hidden block transition-transform duration-300 "+(e[0]?"rotate-90":"rotate-0")),w(n,"class","bg-gray-300 h-6 leading-6 cursor-pointer select-none "),w(t,"class","border-t border-b border-t-gray-400 border-b-gray-300 my-1")},m(o,p){f(o,t,p),y(t,n),y(n,i),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#888888">\r\n    <path d="M0 0h24v24H0V0z" fill="none" />\r\n    <path d="M10 17l5-5-5-5v10z" />\r\n</svg>',y(n,s),y(t,a),E&&E.m(t,null),r=!0,l||(c=g(n,"click",e[4]),l=!0)},p(e,[n]){(!r||1&n&&o!==(o="float-left overflow-hidden block transition-transform duration-300 "+(e[0]?"rotate-90":"rotate-0")))&&w(i,"class",o),(!r||2&n)&&v(s,e[1]),e[0]?E?(E.p(e,n),1&n&&p(E,1)):(E=W(e),E.c(),p(E,1),E.m(t,null)):E&&($(),h(E,1,1,(()=>{E=null})),b())},i(e){r||(p(E),r=!0)},o(e){h(E),r=!1},d(e){e&&x(t),E&&E.d(),l=!1,c()}}}function q(e,t,n){let{$$slots:i={},$$scope:o}=t,{title:s="title"}=t,{open:a=!0}=t;return e.$$set=e=>{"title"in e&&n(1,s=e.title),"open"in e&&n(0,a=e.open),"$$scope"in e&&n(2,o=e.$$scope)},[a,s,o,i,()=>{n(0,a=!a)}]}class G extends o{constructor(e){super(),s(this,e,q,F,a,{title:1,open:0})}}function N(e){let t,n,i,o,s,a,g,$;const b=e[4].default,S=E(b,e,e[3],null);return{c(){t=d("div"),n=d("span"),i=u(e[0]),s=m(),a=d("span"),S&&S.c(),w(n,"title",e[0]),w(n,"class",o="attr-left-title "+e[1]),w(a,"class","flex-grow flex items-center whitespace-nowrap overflow-hidden"),w(t,"class",g="px-3 flex "+(e[2]?"flex-wrap":""))},m(e,o){f(e,t,o),y(t,n),y(n,i),y(t,s),y(t,a),S&&S.m(a,null),$=!0},p(e,[s]){(!$||1&s)&&v(i,e[0]),(!$||1&s)&&w(n,"title",e[0]),(!$||2&s&&o!==(o="attr-left-title "+e[1]))&&w(n,"class",o),S&&S.p&&(!$||8&s)&&r(S,b,e,e[3],$?c(b,e[3],s,null):l(e[3]),null),(!$||4&s&&g!==(g="px-3 flex "+(e[2]?"flex-wrap":"")))&&w(t,"class",g)},i(e){$||(p(S,e),$=!0)},o(e){h(S,e),$=!1},d(e){e&&x(t),S&&S.d(e)}}}function V(e,t,n){let{$$slots:i={},$$scope:o}=t,{title:s}=t,{titleClassName:a=""}=t,{wrap:r=!1}=t;return e.$$set=e=>{"title"in e&&n(0,s=e.title),"titleClassName"in e&&n(1,a=e.titleClassName),"wrap"in e&&n(2,r=e.wrap),"$$scope"in e&&n(3,o=e.$$scope)},[s,a,r,o,i]}class B extends o{constructor(e){super(),s(this,e,V,N,a,{title:0,titleClassName:1,wrap:2})}}const U=window.THREE.BufferGeometry,K=window.THREE.Float32BufferAttribute,J=window.THREE.LineSegments,ee=window.THREE.LineBasicMaterial,te=window.THREE.Matrix3,ne=window.THREE.Vector3,ie=new ne,oe=new ne,se=new te;class ae extends J{constructor(e,t=1,n=16711680){let i=0;const o=e.geometry;if(o&&o.isGeometry)return void console.error("THREE.VertexNormalsHelper no longer supports Geometry. Use BufferGeometry instead.");o&&o.isBufferGeometry&&(i=o.attributes.normal.count);const s=new U,a=new K(2*i*3,3);s.setAttribute("position",a),super(s,new ee({color:n,toneMapped:!1})),this.object=e,this.size=t,this.type="VertexNormalsHelper",this.matrixAutoUpdate=!1,this.update()}update(){this.object.updateMatrixWorld(!0),se.getNormalMatrix(this.object.matrixWorld);const e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)console.error("THREE.VertexNormalsHelper no longer supports Geometry. Use BufferGeometry instead.");else{if(n&&n.isBufferGeometry){const i=n.attributes.position,o=n.attributes.normal;let s=0;for(let n=0,a=i.count;n<a;n++)ie.set(i.getX(n),i.getY(n),i.getZ(n)).applyMatrix4(e),oe.set(o.getX(n),o.getY(n),o.getZ(n)),oe.applyMatrix3(se).normalize().multiplyScalar(this.size).add(ie),t.setXYZ(s,ie.x,ie.y,ie.z),s+=1,t.setXYZ(s,oe.x,oe.y,oe.z),s+=1}t.needsUpdate=!0}}}function re(e,t,n){const i=e.slice();return i[9]=t[n],i[10]=t,i[11]=n,i}function le(e){let t,n;return t=new G({props:{title:"Geometry",$$slots:{default:[ye]},$$scope:{ctx:e}}}),{c(){S(t.$$.fragment)},m(e,i){M(t,e,i),n=!0},p(e,n){const i={};4099&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){P(t,e)}}}function ce(e){let t,n=e[0].type+"";return{c(){t=u(n)},m(e,n){f(e,t,n)},p(e,i){1&i&&n!==(n=e[0].type+"")&&v(t,n)},d(e){e&&x(t)}}}function pe(e){let t,n=e[0].uuid+"";return{c(){t=u(n)},m(e,n){f(e,t,n)},p(e,i){1&i&&n!==(n=e[0].uuid+"")&&v(t,n)},d(e){e&&x(t)}}}function he(e){let t,n,i,o;return{c(){t=d("div"),n=d("input"),w(n,"type","text"),w(n,"class","attr-input-r "),w(t,"class","flex-1 flex items-center")},m(s,a){f(s,t,a),y(t,n),k(n,e[0].name),i||(o=g(n,"input",e[6]),i=!0)},p(e,t){1&t&&n.value!==e[0].name&&k(n,e[0].name)},d(e){e&&x(t),i=!1,o()}}}function de(e){let t,n,i=e[1],o=[];for(let a=0;a<i.length;a+=1)o[a]=me(re(e,i,a));const s=e=>h(o[e],1,1,(()=>{o[e]=null}));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=T()},m(e,i){for(let t=0;t<o.length;t+=1)o[t].m(e,i);f(e,t,i),n=!0},p(e,n){if(2&n){let a;for(i=e[1],a=0;a<i.length;a+=1){const s=re(e,i,a);o[a]?(o[a].p(s,n),p(o[a],1)):(o[a]=me(s),o[a].c(),p(o[a],1),o[a].m(t.parentNode,t))}for($(),a=i.length;a<o.length;a+=1)s(a);b()}},i(e){if(!n){for(let e=0;e<i.length;e+=1)p(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)h(o[t]);n=!1},d(e){X(o,e),e&&x(t)}}}function ue(e){let t,n,i,o,s;function a(){e[7].call(n,e[10],e[11])}return{c(){t=d("div"),n=d("input"),i=m(),w(n,"type","number"),w(n,"step","1"),w(n,"class","attr-input-r "),w(t,"class","flex-1 flex items-center")},m(r,l){f(r,t,l),y(t,n),k(n,e[9].val),f(r,i,l),o||(s=g(n,"input",a),o=!0)},p(t,i){e=t,2&i&&H(n.value)!==e[9].val&&k(n,e[9].val)},d(e){e&&x(t),e&&x(i),o=!1,s()}}}function me(e){let t,n;return t=new B({props:{title:e[9].key,$$slots:{default:[ue]},$$scope:{ctx:e}}}),{c(){S(t.$$.fragment)},m(e,i){M(t,e,i),n=!0},p(e,n){const i={};2&n&&(i.title=e[9].key),4098&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){P(t,e)}}}function we(e){let t,n,i,o,s,a,r,l,c,p,h,g,$,b,E,S,M,P,T,z,X,H,k,Y,j,_,I,R,Z,C=e[0].index.count+"",L=e[0].attributes.position.count+"",D=e[0].attributes.position.itemSize+"",Q=e[0].attributes.normal.count+"",A=e[0].attributes.normal.itemSize+"",O=e[0].attributes.uv.count+"",W=e[0].attributes.uv.itemSize+"";return{c(){t=d("div"),n=d("div"),i=d("div"),i.textContent="index",o=m(),s=u(C),a=m(),r=d("div"),l=d("div"),l.textContent="position",c=m(),p=u(L),h=u("("),g=u(D),$=u(")"),b=m(),E=d("div"),S=d("div"),S.textContent="normal",M=m(),P=u(Q),T=u("("),z=u(A),X=u(")"),H=m(),k=d("div"),Y=d("div"),Y.textContent="uv",j=m(),_=u(O),I=u("("),R=u(W),Z=u(")"),w(i,"class","w-1/2 inline-block"),w(l,"class","w-1/2 inline-block"),w(S,"class","w-1/2 inline-block"),w(Y,"class","w-1/2 inline-block"),w(t,"class","w-full leading-6")},m(e,d){f(e,t,d),y(t,n),y(n,i),y(n,o),y(n,s),y(t,a),y(t,r),y(r,l),y(r,c),y(r,p),y(r,h),y(r,g),y(r,$),y(t,b),y(t,E),y(E,S),y(E,M),y(E,P),y(E,T),y(E,z),y(E,X),y(t,H),y(t,k),y(k,Y),y(k,j),y(k,_),y(k,I),y(k,R),y(k,Z)},p(e,t){1&t&&C!==(C=e[0].index.count+"")&&v(s,C),1&t&&L!==(L=e[0].attributes.position.count+"")&&v(p,L),1&t&&D!==(D=e[0].attributes.position.itemSize+"")&&v(g,D),1&t&&Q!==(Q=e[0].attributes.normal.count+"")&&v(P,Q),1&t&&A!==(A=e[0].attributes.normal.itemSize+"")&&v(z,A),1&t&&O!==(O=e[0].attributes.uv.count+"")&&v(_,O),1&t&&W!==(W=e[0].attributes.uv.itemSize+"")&&v(R,W)},d(e){e&&x(t)}}}function fe(e){var t;let n,i=(null==(t=e[0].boundingSphere)?void 0:t.radius)+"";return{c(){n=u(i)},m(e,t){f(e,n,t)},p(e,t){var o;1&t&&i!==(i=(null==(o=e[0].boundingSphere)?void 0:o.radius)+"")&&v(n,i)},d(e){e&&x(n)}}}function ye(e){var t;let n,i,o,s,a,r,l,c,u,v,E,T,z,X,H,k;n=new B({props:{title:"Type",$$slots:{default:[ce]},$$scope:{ctx:e}}}),o=new B({props:{title:"UUID",$$slots:{default:[pe]},$$scope:{ctx:e}}}),a=new B({props:{title:"Name",$$slots:{default:[he]},$$scope:{ctx:e}}});let Y="SphereGeometry"==(null==(t=e[0])?void 0:t.type)&&de(e);return c=new B({props:{title:"Attributes",$$slots:{default:[we]},$$scope:{ctx:e}}}),v=new B({props:{title:"Bounds",$$slots:{default:[fe]},$$scope:{ctx:e}}}),{c(){S(n.$$.fragment),i=m(),S(o.$$.fragment),s=m(),S(a.$$.fragment),r=m(),Y&&Y.c(),l=m(),S(c.$$.fragment),u=m(),S(v.$$.fragment),E=m(),T=d("div"),z=d("button"),z.textContent="SHOW VERTEX NORMALS",w(z,"class","bg-gray-300 px-4 hover:bg-gray-100 active:bg-gray-50 active:text-gray-800"),w(T,"class","py-4 text-center")},m(t,p){M(n,t,p),f(t,i,p),M(o,t,p),f(t,s,p),M(a,t,p),f(t,r,p),Y&&Y.m(t,p),f(t,l,p),M(c,t,p),f(t,u,p),M(v,t,p),f(t,E,p),f(t,T,p),y(T,z),X=!0,H||(k=g(z,"click",e[2]),H=!0)},p(e,t){var i;const s={};4097&t&&(s.$$scope={dirty:t,ctx:e}),n.$set(s);const r={};4097&t&&(r.$$scope={dirty:t,ctx:e}),o.$set(r);const d={};4097&t&&(d.$$scope={dirty:t,ctx:e}),a.$set(d),"SphereGeometry"==(null==(i=e[0])?void 0:i.type)?Y?(Y.p(e,t),1&t&&p(Y,1)):(Y=de(e),Y.c(),p(Y,1),Y.m(l.parentNode,l)):Y&&($(),h(Y,1,1,(()=>{Y=null})),b());const u={};4097&t&&(u.$$scope={dirty:t,ctx:e}),c.$set(u);const m={};4097&t&&(m.$$scope={dirty:t,ctx:e}),v.$set(m)},i(e){X||(p(n.$$.fragment,e),p(o.$$.fragment,e),p(a.$$.fragment,e),p(Y),p(c.$$.fragment,e),p(v.$$.fragment,e),X=!0)},o(e){h(n.$$.fragment,e),h(o.$$.fragment,e),h(a.$$.fragment,e),h(Y),h(c.$$.fragment,e),h(v.$$.fragment,e),X=!1},d(e){P(n,e),e&&x(i),P(o,e),e&&x(s),P(a,e),e&&x(r),Y&&Y.d(e),e&&x(l),P(c,e),e&&x(u),P(v,e),e&&x(E),e&&x(T),H=!1,k()}}}function ge(e){let t,n,i=e[0]&&le(e);return{c(){i&&i.c(),t=T()},m(e,o){i&&i.m(e,o),f(e,t,o),n=!0},p(e,[n]){e[0]?i?(i.p(e,n),1&n&&p(i,1)):(i=le(e),i.c(),p(i,1),i.m(t.parentNode,t)):i&&($(),h(i,1,1,(()=>{i=null})),b())},i(e){n||(p(i),n=!0)},o(e){h(i),n=!1},d(e){i&&i.d(e),e&&x(t)}}}let ve=new Map;function $e(e,t,n){let i;var o;z(e,A,(e=>n(5,i=e)));let s,a,r=[];return e.$$.update=()=>{if(2&e.$$.dirty&&r&&(r.map((e=>(e.val||(e.val=0),e))),function(){if(s){switch(s.dispose(),s.type){case"SphereGeometry":n(4,a.geometry=new THREE.SphereGeometry(r[0].val,r[1].val,r[2].val,THREE.MathUtils.degToRad(r[3].val),THREE.MathUtils.degToRad(r[4].val),THREE.MathUtils.degToRad(r[5].val),THREE.MathUtils.degToRad(r[6].val)),a)}n(0,s=a.geometry)}}()),32&e.$$.dirty&&n(4,a=i),16&e.$$.dirty&&n(0,s=null==a?void 0:a.geometry),24&e.$$.dirty&&(null===n(3,o=ve.get(a.id))||void 0===o||o.update()),3&e.$$.dirty&&s)switch(s.type){case"SphereGeometry":if(!r.length)for(const e in s.parameters)if(Object.prototype.hasOwnProperty.call(s.parameters,e)){const t=s.parameters[e];switch(e){case"phiStart":case"phiLength":case"thetaStart":case"thetaLength":r.push({key:e,val:THREE.MathUtils.radToDeg(t)});break;case"widthSegments":case"heightSegments":r.push({key:e,val:Math.floor(t)});break;default:r.push({key:e,val:t})}}}},[s,r,function(){if(a)if(ve.has(a.id)){let e=ve.get(a.id);e.parent.remove(e),ve.delete(a.id)}else{let e=new ae(a);a.parent.add(e),ve.set(a.id,e)}},o,a,i,function(){s.name=this.value,n(0,s),n(4,a),n(5,i)},function(e,t){e[t].val=H(this.value),n(1,r)}]}class be extends o{constructor(e){super(),s(this,e,$e,ge,a,{})}}function xe(e){let t,n,i,o,s,a,r,l,c,d,u,w,y,g,v,E,z,X,H,k,Y;t=new B({props:{title:"Type",$$slots:{default:[Ee]},$$scope:{ctx:e}}}),i=new B({props:{title:"UUID",$$slots:{default:[Se]},$$scope:{ctx:e}}}),s=new B({props:{title:"Name",$$slots:{default:[Me]},$$scope:{ctx:e}}}),r=new G({props:{title:"Transform",$$slots:{default:[He]},$$scope:{ctx:e}}}),c=new B({props:{title:"Visible",$$slots:{default:[ke]},$$scope:{ctx:e}}}),u=new B({props:{title:"Frustum Cull",titleClassName:"leading-4",$$slots:{default:[Ye]},$$scope:{ctx:e}}}),y=new B({props:{title:"Shadow",$$slots:{default:[_e]},$$scope:{ctx:e}}});let j=e[1]&&Ie(e);E=new B({props:{title:"RenderOrder",$$slots:{default:[Qe]},$$scope:{ctx:e}}}),X=new be({});return{c(){S(t.$$.fragment),n=m(),S(i.$$.fragment),o=m(),S(s.$$.fragment),a=m(),S(r.$$.fragment),l=m(),S(c.$$.fragment),d=m(),S(u.$$.fragment),w=m(),S(y.$$.fragment),g=m(),j&&j.c(),v=m(),S(E.$$.fragment),z=m(),S(X.$$.fragment),H=m(),k=T()},m(e,p){M(t,e,p),f(e,n,p),M(i,e,p),f(e,o,p),M(s,e,p),f(e,a,p),M(r,e,p),f(e,l,p),M(c,e,p),f(e,d,p),M(u,e,p),f(e,w,p),M(y,e,p),f(e,g,p),j&&j.m(e,p),f(e,v,p),M(E,e,p),f(e,z,p),M(X,e,p),f(e,H,p),f(e,k,p),Y=!0},p(e,n){const o={};33554433&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const a={};33554433&n&&(a.$$scope={dirty:n,ctx:e}),i.$set(a);const l={};33554433&n&&(l.$$scope={dirty:n,ctx:e}),s.$set(l);const d={};33554437&n&&(d.$$scope={dirty:n,ctx:e}),r.$set(d);const m={};33554433&n&&(m.$$scope={dirty:n,ctx:e}),c.$set(m);const w={};33554433&n&&(w.$$scope={dirty:n,ctx:e}),u.$set(w);const f={};33554433&n&&(f.$$scope={dirty:n,ctx:e}),y.$set(f),e[1]?j?(j.p(e,n),2&n&&p(j,1)):(j=Ie(e),j.c(),p(j,1),j.m(v.parentNode,v)):j&&($(),h(j,1,1,(()=>{j=null})),b());const g={};33554433&n&&(g.$$scope={dirty:n,ctx:e}),E.$set(g)},i(e){Y||(p(t.$$.fragment,e),p(i.$$.fragment,e),p(s.$$.fragment,e),p(r.$$.fragment,e),p(c.$$.fragment,e),p(u.$$.fragment,e),p(y.$$.fragment,e),p(j),p(E.$$.fragment,e),p(X.$$.fragment,e),Y=!0)},o(e){h(t.$$.fragment,e),h(i.$$.fragment,e),h(s.$$.fragment,e),h(r.$$.fragment,e),h(c.$$.fragment,e),h(u.$$.fragment,e),h(y.$$.fragment,e),h(j),h(E.$$.fragment,e),h(X.$$.fragment,e),Y=!1},d(e){P(t,e),e&&x(n),P(i,e),e&&x(o),P(s,e),e&&x(a),P(r,e),e&&x(l),P(c,e),e&&x(d),P(u,e),e&&x(w),P(y,e),e&&x(g),j&&j.d(e),e&&x(v),P(E,e),e&&x(z),P(X,e),e&&x(H),e&&x(k)}}}function Ee(e){let t,n=e[0].type+"";return{c(){t=u(n)},m(e,n){f(e,t,n)},p(e,i){1&i&&n!==(n=e[0].type+"")&&v(t,n)},d(e){e&&x(t)}}}function Se(e){let t,n=e[0].uuid+"";return{c(){t=u(n)},m(e,n){f(e,t,n)},p(e,i){1&i&&n!==(n=e[0].uuid+"")&&v(t,n)},d(e){e&&x(t)}}}function Me(e){let t,n,i;return{c(){t=d("div"),n=d("input"),w(n,"type","text"),w(n,"class","attr-input-r "),n.value=i=e[0].name,w(t,"class","flex-1 flex items-center")},m(e,i){f(e,t,i),y(t,n)},p(e,t){1&t&&i!==(i=e[0].name)&&n.value!==i&&(n.value=i)},d(e){e&&x(t)}}}function Pe(e){let t,n,i,o,s,a,r,l,c,p,h,u,v,$,b,E;return{c(){t=d("div"),n=d("span"),n.textContent="x",i=m(),o=d("input"),s=m(),a=d("div"),r=d("span"),r.textContent="y",l=m(),c=d("input"),p=m(),h=d("div"),u=d("span"),u.textContent="z",v=m(),$=d("input"),w(n,"class","px-1"),w(o,"type","number"),w(o,"step","0.1"),w(o,"class","attr-input-r "),w(t,"class","flex-1 flex items-center"),w(r,"class","px-1"),w(c,"type","number"),w(c,"step","0.1"),w(c,"class","attr-input-r "),w(a,"class","flex-1 flex items-center"),w(u,"class","px-1"),w($,"type","number"),w($,"step","0.1"),w($,"class","attr-input-r "),w(h,"class","flex-1 flex items-center")},m(d,m){f(d,t,m),y(t,n),y(t,i),y(t,o),k(o,e[0].position.x),f(d,s,m),f(d,a,m),y(a,r),y(a,l),y(a,c),k(c,e[0].position.y),f(d,p,m),f(d,h,m),y(h,u),y(h,v),y(h,$),k($,e[0].position.z),b||(E=[g(o,"input",e[6]),g(c,"input",e[7]),g($,"input",e[8])],b=!0)},p(e,t){1&t&&H(o.value)!==e[0].position.x&&k(o,e[0].position.x),1&t&&H(c.value)!==e[0].position.y&&k(c,e[0].position.y),1&t&&H($.value)!==e[0].position.z&&k($,e[0].position.z)},d(e){e&&x(t),e&&x(s),e&&x(a),e&&x(p),e&&x(h),b=!1,_(E)}}}function Te(e){let t,n,i,o;return t=new B({props:{title:"Rotation",$$slots:{default:[ze]},$$scope:{ctx:e}}}),i=new B({props:{title:"Scale",$$slots:{default:[Xe]},$$scope:{ctx:e}}}),{c(){S(t.$$.fragment),n=m(),S(i.$$.fragment)},m(e,s){M(t,e,s),f(e,n,s),M(i,e,s),o=!0},p(e,n){const o={};33554433&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const s={};33554433&n&&(s.$$scope={dirty:n,ctx:e}),i.$set(s)},i(e){o||(p(t.$$.fragment,e),p(i.$$.fragment,e),o=!0)},o(e){h(t.$$.fragment,e),h(i.$$.fragment,e),o=!1},d(e){P(t,e),e&&x(n),P(i,e)}}}function ze(e){let t,n,i,o,s,a,r,l,c,p,h,u,v,$,b,E;return{c(){t=d("div"),n=d("span"),n.textContent="x",i=m(),o=d("input"),s=m(),a=d("div"),r=d("span"),r.textContent="y",l=m(),c=d("input"),p=m(),h=d("div"),u=d("span"),u.textContent="z",v=m(),$=d("input"),w(n,"class","px-1"),w(o,"type","number"),w(o,"step","0.1"),w(o,"class","attr-input-r "),w(t,"class","flex-1 flex items-center"),w(r,"class","px-1"),w(c,"type","number"),w(c,"step","0.1"),w(c,"class","attr-input-r "),w(a,"class","flex-1 flex items-center"),w(u,"class","px-1"),w($,"type","number"),w($,"step","0.1"),w($,"class","attr-input-r "),w(h,"class","flex-1 flex items-center")},m(d,m){f(d,t,m),y(t,n),y(t,i),y(t,o),k(o,e[0].rotation.x),f(d,s,m),f(d,a,m),y(a,r),y(a,l),y(a,c),k(c,e[0].rotation.y),f(d,p,m),f(d,h,m),y(h,u),y(h,v),y(h,$),k($,e[0].rotation.z),b||(E=[g(o,"input",e[9]),g(c,"input",e[10]),g($,"input",e[11])],b=!0)},p(e,t){1&t&&H(o.value)!==e[0].rotation.x&&k(o,e[0].rotation.x),1&t&&H(c.value)!==e[0].rotation.y&&k(c,e[0].rotation.y),1&t&&H($.value)!==e[0].rotation.z&&k($,e[0].rotation.z)},d(e){e&&x(t),e&&x(s),e&&x(a),e&&x(p),e&&x(h),b=!1,_(E)}}}function Xe(e){let t,n,i,o,s,a,r,l,c,p,h,u,v,$,b,E;return{c(){t=d("div"),n=d("span"),n.textContent="x",i=m(),o=d("input"),s=m(),a=d("div"),r=d("span"),r.textContent="y",l=m(),c=d("input"),p=m(),h=d("div"),u=d("span"),u.textContent="z",v=m(),$=d("input"),w(n,"class","px-1"),w(o,"type","number"),w(o,"step","0.1"),w(o,"class","attr-input-r "),w(t,"class","flex-1 flex items-center"),w(r,"class","px-1"),w(c,"type","number"),w(c,"step","0.1"),w(c,"class","attr-input-r "),w(a,"class","flex-1 flex items-center"),w(u,"class","px-1"),w($,"type","number"),w($,"step","0.1"),w($,"class","attr-input-r "),w(h,"class","flex-1 flex items-center")},m(d,m){f(d,t,m),y(t,n),y(t,i),y(t,o),k(o,e[0].scale.x),f(d,s,m),f(d,a,m),y(a,r),y(a,l),y(a,c),k(c,e[0].scale.y),f(d,p,m),f(d,h,m),y(h,u),y(h,v),y(h,$),k($,e[0].scale.z),b||(E=[g(o,"input",e[12]),g(c,"input",e[13]),g($,"input",e[14])],b=!0)},p(e,t){1&t&&H(o.value)!==e[0].scale.x&&k(o,e[0].scale.x),1&t&&H(c.value)!==e[0].scale.y&&k(c,e[0].scale.y),1&t&&H($.value)!==e[0].scale.z&&k($,e[0].scale.z)},d(e){e&&x(t),e&&x(s),e&&x(a),e&&x(p),e&&x(h),b=!1,_(E)}}}function He(e){let t,n,i,o;t=new B({props:{title:"Position",$$slots:{default:[Pe]},$$scope:{ctx:e}}});let s=null==e[2]&&Te(e);return{c(){S(t.$$.fragment),n=m(),s&&s.c(),i=T()},m(e,a){M(t,e,a),f(e,n,a),s&&s.m(e,a),f(e,i,a),o=!0},p(e,n){const o={};33554433&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o),null==e[2]?s?(s.p(e,n),4&n&&p(s,1)):(s=Te(e),s.c(),p(s,1),s.m(i.parentNode,i)):s&&($(),h(s,1,1,(()=>{s=null})),b())},i(e){o||(p(t.$$.fragment,e),p(s),o=!0)},o(e){h(t.$$.fragment,e),h(s),o=!1},d(e){P(t,e),e&&x(n),s&&s.d(e),e&&x(i)}}}function ke(e){let t,n,i;return{c(){t=d("input"),w(t,"type","checkbox"),w(t,"class","outline-none px-1 h-4 w-4 rounded-md")},m(o,s){f(o,t,s),t.checked=e[0].visible,n||(i=g(t,"change",e[15]),n=!0)},p(e,n){1&n&&(t.checked=e[0].visible)},d(e){e&&x(t),n=!1,i()}}}function Ye(e){let t,n,i;return{c(){t=d("input"),w(t,"type","checkbox"),w(t,"class","outline-none px-1 h-4 w-4 rounded-md")},m(o,s){f(o,t,s),t.checked=e[0].frustumCulled,n||(i=g(t,"change",e[16]),n=!0)},p(e,n){1&n&&(t.checked=e[0].frustumCulled)},d(e){e&&x(t),n=!1,i()}}}function je(e){let t,n,i,o,s;return{c(){t=d("input"),n=m(),i=d("label"),i.textContent="receive",w(t,"id","receive"),w(t,"type","checkbox"),w(t,"class","outline-none px-1 h-4 w-4 rounded-md"),w(i,"class","px-1 select-none"),w(i,"for","receive")},m(a,r){f(a,t,r),t.checked=e[0].receiveShadow,f(a,n,r),f(a,i,r),o||(s=g(t,"change",e[18]),o=!0)},p(e,n){1&n&&(t.checked=e[0].receiveShadow)},d(e){e&&x(t),e&&x(n),e&&x(i),o=!1,s()}}}function _e(e){let t,n,i,o,s,a,r,l="Mesh"==e[0].type&&je(e);return{c(){t=d("input"),n=m(),i=d("label"),i.textContent="cost",o=m(),l&&l.c(),s=T(),w(t,"id","cost"),w(t,"type","checkbox"),w(t,"class","outline-none px-1 h-4 w-4 rounded-md"),w(i,"class","px-1 select-none"),w(i,"for","cost")},m(c,p){f(c,t,p),t.checked=e[0].castShadow,f(c,n,p),f(c,i,p),f(c,o,p),l&&l.m(c,p),f(c,s,p),a||(r=g(t,"change",e[17]),a=!0)},p(e,n){1&n&&(t.checked=e[0].castShadow),"Mesh"==e[0].type?l?l.p(e,n):(l=je(e),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(e){e&&x(t),e&&x(n),e&&x(i),e&&x(o),l&&l.d(e),e&&x(s),a=!1,r()}}}function Ie(e){let t,n,i,o,s,a,r,l,c,d;return t=new B({props:{title:"Intensity",$$slots:{default:[Re]},$$scope:{ctx:e}}}),i=new B({props:{title:"Color",$$slots:{default:[Ze]},$$scope:{ctx:e}}}),s=new B({props:{title:"Shadow Bias",$$slots:{default:[Ce]},$$scope:{ctx:e}}}),r=new B({props:{title:"Shadow Normal Bias",$$slots:{default:[Le]},$$scope:{ctx:e}}}),c=new B({props:{title:"Shadow Radius",$$slots:{default:[De]},$$scope:{ctx:e}}}),{c(){S(t.$$.fragment),n=m(),S(i.$$.fragment),o=m(),S(s.$$.fragment),a=m(),S(r.$$.fragment),l=m(),S(c.$$.fragment)},m(e,p){M(t,e,p),f(e,n,p),M(i,e,p),f(e,o,p),M(s,e,p),f(e,a,p),M(r,e,p),f(e,l,p),M(c,e,p),d=!0},p(e,n){const o={};33554434&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const a={};33554440&n&&(a.$$scope={dirty:n,ctx:e}),i.$set(a);const l={};33554434&n&&(l.$$scope={dirty:n,ctx:e}),s.$set(l);const p={};33554434&n&&(p.$$scope={dirty:n,ctx:e}),r.$set(p);const h={};33554434&n&&(h.$$scope={dirty:n,ctx:e}),c.$set(h)},i(e){d||(p(t.$$.fragment,e),p(i.$$.fragment,e),p(s.$$.fragment,e),p(r.$$.fragment,e),p(c.$$.fragment,e),d=!0)},o(e){h(t.$$.fragment,e),h(i.$$.fragment,e),h(s.$$.fragment,e),h(r.$$.fragment,e),h(c.$$.fragment,e),d=!1},d(e){P(t,e),e&&x(n),P(i,e),e&&x(o),P(s,e),e&&x(a),P(r,e),e&&x(l),P(c,e)}}}function Re(e){let t,n,i;return{c(){t=d("input"),w(t,"type","number"),w(t,"step","0.1"),w(t,"class","attr-input-r ")},m(o,s){f(o,t,s),k(t,e[1].intensity),n||(i=g(t,"input",e[19]),n=!0)},p(e,n){2&n&&H(t.value)!==e[1].intensity&&k(t,e[1].intensity)},d(e){e&&x(t),n=!1,i()}}}function Ze(e){let t,n,i;return{c(){t=d("input"),w(t,"type","color"),w(t,"class","attr-input-r ")},m(o,s){f(o,t,s),k(t,e[3]),n||(i=g(t,"input",e[20]),n=!0)},p(e,n){8&n&&k(t,e[3])},d(e){e&&x(t),n=!1,i()}}}function Ce(e){let t,n,i;return{c(){t=d("input"),w(t,"type","number"),w(t,"step","0.0001"),w(t,"class","attr-input-r")},m(o,s){f(o,t,s),k(t,e[1].shadow.bias),n||(i=g(t,"input",e[21]),n=!0)},p(e,n){2&n&&H(t.value)!==e[1].shadow.bias&&k(t,e[1].shadow.bias)},d(e){e&&x(t),n=!1,i()}}}function Le(e){let t,n,i;return{c(){t=d("input"),w(t,"type","number"),w(t,"step","0.1"),w(t,"class","attr-input-r ")},m(o,s){f(o,t,s),k(t,e[1].shadow.normalBias),n||(i=g(t,"input",e[22]),n=!0)},p(e,n){2&n&&H(t.value)!==e[1].shadow.normalBias&&k(t,e[1].shadow.normalBias)},d(e){e&&x(t),n=!1,i()}}}function De(e){let t,n,i;return{c(){t=d("input"),w(t,"type","number"),w(t,"step","0.01"),w(t,"class","attr-input-r ")},m(o,s){f(o,t,s),k(t,e[1].shadow.radius),n||(i=g(t,"input",e[23]),n=!0)},p(e,n){2&n&&H(t.value)!==e[1].shadow.radius&&k(t,e[1].shadow.radius)},d(e){e&&x(t),n=!1,i()}}}function Qe(e){let t,n,i;return{c(){t=d("input"),w(t,"type","number"),w(t,"class","attr-input-r ")},m(o,s){f(o,t,s),k(t,e[0].renderOrder),n||(i=g(t,"input",e[24]),n=!0)},p(e,n){1&n&&H(t.value)!==e[0].renderOrder&&k(t,e[0].renderOrder)},d(e){e&&x(t),n=!1,i()}}}function Ae(e){let t,n,i,o,s,a,r,l,c,g=null!=e[0]&&xe(e);return{c(){t=d("div"),n=d("div"),i=d("button"),o=d("img"),a=u("Inspector"),r=m(),l=d("div"),g&&g.c(),w(o,"class","inline w-3 mx-1"),Y(o.src,s="/assets/joomla.9ecfab72.svg")||w(o,"src","/assets/joomla.9ecfab72.svg"),w(o,"alt",""),w(i,"class","px-3 bg-gray-200"),w(n,"class","bg-gray-300 leading-8"),w(l,"class","content bg-gray-200 leading-8 justify-between"),w(t,"class","component-view")},m(e,s){f(e,t,s),y(t,n),y(n,i),y(i,o),y(i,a),y(t,r),y(t,l),g&&g.m(l,null),c=!0},p(e,[t]){null!=e[0]?g?(g.p(e,t),1&t&&p(g,1)):(g=xe(e),g.c(),p(g,1),g.m(l,null)):g&&($(),h(g,1,1,(()=>{g=null})),b())},i(e){c||(p(g),c=!0)},o(e){h(g),c=!1},d(e){e&&x(t),g&&g.d()}}}function Oe(e,t,n){let i,o;z(e,A,(e=>n(4,i=e))),z(e,O,(e=>n(5,o=e)));let s,a=null,r=null,l=null;return j((()=>{l&&l.update()})),e.$$.update=()=>{32&e.$$.dirty&&n(2,l=o),16&e.$$.dirty&&n(0,a=i),11&e.$$.dirty&&a&&("Mesh"!==a.type?(n(1,r=a),r.color.setStyle(s),n(3,s="#"+r.color.getHexString())):n(1,r=null)),4&e.$$.dirty&&l&&l.update()},[a,r,l,s,i,o,function(){a.position.x=H(this.value),n(0,a),n(4,i)},function(){a.position.y=H(this.value),n(0,a),n(4,i)},function(){a.position.z=H(this.value),n(0,a),n(4,i)},function(){a.rotation.x=H(this.value),n(0,a),n(4,i)},function(){a.rotation.y=H(this.value),n(0,a),n(4,i)},function(){a.rotation.z=H(this.value),n(0,a),n(4,i)},function(){a.scale.x=H(this.value),n(0,a),n(4,i)},function(){a.scale.y=H(this.value),n(0,a),n(4,i)},function(){a.scale.z=H(this.value),n(0,a),n(4,i)},function(){a.visible=this.checked,n(0,a),n(4,i)},function(){a.frustumCulled=this.checked,n(0,a),n(4,i)},function(){a.castShadow=this.checked,n(0,a),n(4,i)},function(){a.receiveShadow=this.checked,n(0,a),n(4,i)},function(){r.intensity=H(this.value),n(1,r),n(0,a),n(3,s),n(4,i)},function(){s=this.value,n(3,s),n(0,a),n(1,r),n(4,i)},function(){r.shadow.bias=H(this.value),n(1,r),n(0,a),n(3,s),n(4,i)},function(){r.shadow.normalBias=H(this.value),n(1,r),n(0,a),n(3,s),n(4,i)},function(){r.shadow.radius=H(this.value),n(1,r),n(0,a),n(3,s),n(4,i)},function(){a.renderOrder=H(this.value),n(0,a),n(4,i)}]}class We extends o{constructor(e){super(),s(this,e,Oe,Ae,a,{})}}const Fe=window.THREE;function qe(e,t){this.enabled=!0,this.center=new Fe.Vector3,this.panSpeed=.002,this.zoomSpeed=.1,this.rotationSpeed=.005;var n=this,i=new Fe.Vector3,o=new Fe.Vector3,s=new Fe.Box3,a=-1,r=0,l=1,c=2,p=a,h=this.center,d=new Fe.Matrix3,u=new Fe.Vector2,m=new Fe.Vector2,w=new Fe.Spherical,f=new Fe.Sphere,y={type:"change"};function g(e){if(!1!==n.enabled){switch(e.pointerType){case"mouse":case"pen":!function(e){0===e.button?p=r:1===e.button?p=l:2===e.button&&(p=c);m.set(e.clientX,e.clientY)}(e)}t.ownerDocument.addEventListener("pointermove",v,!1),t.ownerDocument.addEventListener("pointerup",$,!1)}}function v(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){u.set(e.clientX,e.clientY);var t=u.x-m.x,i=u.y-m.y;p===r?n.rotate(o.set(-t,-i,0)):p===l?n.zoom(o.set(0,0,i)):p===c&&n.pan(o.set(-t,i,0));m.set(e.clientX,e.clientY)}(e)}}function $(e){switch(e.pointerType){case"mouse":case"pen":b()}t.ownerDocument.removeEventListener("pointermove",v,!1),t.ownerDocument.removeEventListener("pointerup",$,!1)}function b(){p=a}function x(e){!1!==n.enabled&&(e.preventDefault(),n.zoom(o.set(0,0,e.deltaY>0?1:-1)))}function E(e){e.preventDefault()}this.focus=function(t){var i;s.setFromObject(t),!1===s.isEmpty()?(s.getCenter(h),i=s.getBoundingSphere(f).radius):(h.setFromMatrixPosition(t.matrixWorld),i=.1),o.set(0,0,1),o.applyQuaternion(e.quaternion),o.multiplyScalar(4*i),e.position.copy(h).add(o),n.dispatchEvent(y)},this.pan=function(t){var i=e.position.distanceTo(h);t.multiplyScalar(i*n.panSpeed),t.applyMatrix3(d.getNormalMatrix(e.matrix)),e.position.add(t),h.add(t),n.dispatchEvent(y)},this.zoom=function(t){var i=e.position.distanceTo(h);t.multiplyScalar(i*n.zoomSpeed),t.length()>i||(t.applyMatrix3(d.getNormalMatrix(e.matrix)),e.position.add(t),n.dispatchEvent(y))},this.rotate=function(t){i.copy(e.position).sub(h),w.setFromVector3(i),w.theta+=t.x*n.rotationSpeed,w.phi+=t.y*n.rotationSpeed,w.makeSafe(),i.setFromSpherical(w),e.position.copy(h).add(i),e.lookAt(h),n.dispatchEvent(y)},this.dispose=function(){t.removeEventListener("contextmenu",E,!1),t.removeEventListener("dblclick",b,!1),t.removeEventListener("wheel",x,!1),t.removeEventListener("pointerdown",g,!1),t.removeEventListener("touchstart",T,!1),t.removeEventListener("touchmove",z,!1)},t.addEventListener("contextmenu",E,!1),t.addEventListener("dblclick",b,!1),t.addEventListener("wheel",x,!1),t.addEventListener("pointerdown",g,!1);var S=[new Fe.Vector3,new Fe.Vector3,new Fe.Vector3],M=[new Fe.Vector3,new Fe.Vector3,new Fe.Vector3],P=null;function T(e){if(!1!==n.enabled){switch(e.touches.length){case 1:S[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),S[1].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio);break;case 2:S[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),S[1].set(e.touches[1].pageX,e.touches[1].pageY,0).divideScalar(window.devicePixelRatio),P=S[0].distanceTo(S[1])}M[0].copy(S[0]),M[1].copy(S[1])}}function z(e){if(!1!==n.enabled){switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:S[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),S[1].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),n.rotate(S[0].sub(a(S[0],M)).multiplyScalar(-1));break;case 2:S[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),S[1].set(e.touches[1].pageX,e.touches[1].pageY,0).divideScalar(window.devicePixelRatio);var t=S[0].distanceTo(S[1]);n.zoom(o.set(0,0,P-t)),P=t;var i=S[0].clone().sub(a(S[0],M)),s=S[1].clone().sub(a(S[1],M));i.x=-i.x,s.x=-s.x,n.pan(i.add(s))}M[0].copy(S[0]),M[1].copy(S[1])}function a(e,t){var n=t[0];for(var i in t)n.distanceTo(e)>t[i].distanceTo(e)&&(n=t[i]);return n}}t.addEventListener("touchstart",T,!1),t.addEventListener("touchmove",z,!1)}qe.prototype=Object.create(Fe.EventDispatcher.prototype),qe.prototype.constructor=qe;const Ge=window.THREE.BoxGeometry,Ne=window.THREE.BufferGeometry,Ve=window.THREE.Color,Be=window.THREE.CylinderGeometry,Ue=window.THREE.DoubleSide,Ke=window.THREE.Euler,Je=window.THREE.Float32BufferAttribute,et=window.THREE.Line,tt=window.THREE.LineBasicMaterial,nt=window.THREE.Matrix4,it=window.THREE.Mesh,ot=window.THREE.MeshBasicMaterial,st=window.THREE.Object3D,at=window.THREE.OctahedronGeometry,rt=window.THREE.PlaneGeometry,lt=window.THREE.Quaternion,ct=window.THREE.Raycaster,pt=window.THREE.SphereGeometry,ht=window.THREE.TorusGeometry,dt=window.THREE.Vector3,ut=new ct,mt=new dt,wt=new dt,ft=new lt,yt={X:new dt(1,0,0),Y:new dt(0,1,0),Z:new dt(0,0,1)},gt={type:"change"},vt={type:"mouseDown"},$t={type:"mouseUp",mode:null},bt={type:"objectChange"};class xt extends st{constructor(e,n){super(),t(this,"showX"),t(this,"showY"),t(this,"showZ"),t(this,"enabled"),void 0===n&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),n=document),this.visible=!1,this.domElement=n;const i=new Ot;this._gizmo=i,this.add(i);const o=new Wt;this._plane=o,this.add(o);const s=this;function a(e,t){let n=t;Object.defineProperty(s,e,{get:function(){return void 0!==n?n:t},set:function(t){n!==t&&(n=t,o[e]=t,i[e]=t,s.dispatchEvent({type:e+"-changed",value:t}),s.dispatchEvent(gt))}}),s[e]=t,o[e]=t,i[e]=t}a("camera",e),a("object",void 0),a("enabled",!0),a("axis",null),a("mode","translate"),a("translationSnap",null),a("rotationSnap",null),a("scaleSnap",null),a("space","world"),a("size",1),a("dragging",!1),a("showX",!0),a("showY",!0),a("showZ",!0);const r=new dt,l=new dt,c=new lt,p=new lt,h=new dt,d=new lt,u=new dt,m=new dt,w=new dt,f=new dt;a("worldPosition",r),a("worldPositionStart",l),a("worldQuaternion",c),a("worldQuaternionStart",p),a("cameraPosition",h),a("cameraQuaternion",d),a("pointStart",u),a("pointEnd",m),a("rotationAxis",w),a("rotationAngle",0),a("eye",f),this._offset=new dt,this._startNorm=new dt,this._endNorm=new dt,this._cameraScale=new dt,this._parentPosition=new dt,this._parentQuaternion=new lt,this._parentQuaternionInv=new lt,this._parentScale=new dt,this._worldScaleStart=new dt,this._worldQuaternionInv=new lt,this._worldScale=new dt,this._positionStart=new dt,this._quaternionStart=new lt,this._scaleStart=new dt,this._getPointer=Et.bind(this),this._onPointerDown=Mt.bind(this),this._onPointerHover=St.bind(this),this._onPointerMove=Pt.bind(this),this._onPointerUp=Tt.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(void 0===this.object||!0===this.dragging)return;ut.setFromCamera(e,this.camera);const t=zt(this._gizmo.picker[this.mode],ut);this.axis=t?t.object.name:null}pointerDown(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){ut.setFromCamera(e,this.camera);const t=zt(this._plane,ut,!0);if(t){let e=this.space;if("scale"===this.mode?e="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(e="world"),"local"===e&&"rotate"===this.mode){const e=this.rotationSnap;"X"===this.axis&&e&&(this.object.rotation.x=Math.round(this.object.rotation.x/e)*e),"Y"===this.axis&&e&&(this.object.rotation.y=Math.round(this.object.rotation.y/e)*e),"Z"===this.axis&&e&&(this.object.rotation.z=Math.round(this.object.rotation.z/e)*e)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)}this.dragging=!0,vt.mode=this.mode,this.dispatchEvent(vt)}}pointerMove(e){const t=this.axis,n=this.mode,i=this.object;let o=this.space;if("scale"===n?o="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(o="world"),void 0===i||null===t||!1===this.dragging||-1!==e.button)return;ut.setFromCamera(e,this.camera);const s=zt(this._plane,ut,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===o&&"XYZ"!==t&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===t.indexOf("X")&&(this._offset.x=0),-1===t.indexOf("Y")&&(this._offset.y=0),-1===t.indexOf("Z")&&(this._offset.z=0),"local"===o&&"XYZ"!==t?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),i.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===o&&(i.position.applyQuaternion(ft.copy(this._quaternionStart).invert()),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(this._quaternionStart)),"world"===o&&(i.parent&&i.position.add(mt.setFromMatrixPosition(i.parent.matrixWorld)),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(mt.setFromMatrixPosition(i.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){let e=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(e*=-1),wt.set(e,e,e)}else mt.copy(this.pointStart),wt.copy(this.pointEnd),mt.applyQuaternion(this._worldQuaternionInv),wt.applyQuaternion(this._worldQuaternionInv),wt.divide(mt),-1===t.search("X")&&(wt.x=1),-1===t.search("Y")&&(wt.y=1),-1===t.search("Z")&&(wt.z=1);i.scale.copy(this._scaleStart).multiply(wt),this.scaleSnap&&(-1!==t.search("X")&&(i.scale.x=Math.round(i.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(i.scale.y=Math.round(i.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(i.scale.z=Math.round(i.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);const e=20/this.worldPosition.distanceTo(mt.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===t?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(mt.copy(this.rotationAxis).cross(this.eye))*e):"X"!==t&&"Y"!==t&&"Z"!==t||(this.rotationAxis.copy(yt[t]),mt.copy(yt[t]),"local"===o&&mt.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(mt.cross(this.eye).normalize())*e),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===o&&"E"!==t&&"XYZE"!==t?(i.quaternion.copy(this._quaternionStart),i.quaternion.multiply(ft.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),i.quaternion.copy(ft.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),i.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(gt),this.dispatchEvent(bt)}}pointerUp(e){0===e.button&&(this.dragging&&null!==this.axis&&($t.mode=this.mode,this.dispatchEvent($t)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function Et(e){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};{const t=e.changedTouches?e.changedTouches[0]:e,n=this.domElement.getBoundingClientRect();return{x:(t.clientX-n.left)/n.width*2-1,y:-(t.clientY-n.top)/n.height*2+1,button:e.button}}}function St(e){if(this.enabled)switch(e.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(e))}}function Mt(e){this.enabled&&(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(e)),this.pointerDown(this._getPointer(e)))}function Pt(e){this.enabled&&this.pointerMove(this._getPointer(e))}function Tt(e){this.enabled&&(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(e)))}function zt(e,t,n){const i=t.intersectObject(e,!0);for(let o=0;o<i.length;o++)if(i[o].object.visible||n)return i[o];return!1}xt.prototype.isTransformControls=!0;const Xt=new Ke,Ht=new dt(0,1,0),kt=new dt(0,0,0),Yt=new nt,jt=new lt,_t=new lt,It=new dt,Rt=new nt,Zt=new dt(1,0,0),Ct=new dt(0,1,0),Lt=new dt(0,0,1),Dt=new dt,Qt=new dt,At=new dt;class Ot extends st{constructor(){super(),this.type="TransformControlsGizmo";const e=new ot({depthTest:!1,depthWrite:!1,transparent:!0,side:Ue,fog:!1,toneMapped:!1}),t=new tt({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),n=e.clone();n.opacity=.15;const i=e.clone();i.opacity=.33;const o=e.clone();o.color.set(16711680);const s=e.clone();s.color.set(65280);const a=e.clone();a.color.set(255);const r=e.clone();r.opacity=.25;const l=r.clone();l.color.set(16776960);const c=r.clone();c.color.set(65535);const p=r.clone();p.color.set(16711935);e.clone().color.set(16776960);const h=t.clone();h.color.set(16711680);const d=t.clone();d.color.set(65280);const u=t.clone();u.color.set(255);const m=t.clone();m.color.set(65535);const w=t.clone();w.color.set(16711935);const f=t.clone();f.color.set(16776960);const y=t.clone();y.color.set(7895160);const g=f.clone();g.opacity=.25;const v=new Be(0,.05,.2,12,1,!1),$=new Ge(.125,.125,.125),b=new Ne;function x(e,t){const n=new Ne,i=[];for(let o=0;o<=64*t;++o)i.push(0,Math.cos(o/32*Math.PI)*e,Math.sin(o/32*Math.PI)*e);return n.setAttribute("position",new Je(i,3)),n}b.setAttribute("position",new Je([0,0,0,1,0,0],3));const E={X:[[new it(v,o),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new it(v,o),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new et(b,h)]],Y:[[new it(v,s),[0,1,0],null,null,"fwd"],[new it(v,s),[0,1,0],[Math.PI,0,0],null,"bwd"],[new et(b,d),null,[0,0,Math.PI/2]]],Z:[[new it(v,a),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new it(v,a),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new et(b,u),null,[0,-Math.PI/2,0]]],XYZ:[[new it(new at(.1,0),r.clone()),[0,0,0],[0,0,0]]],XY:[[new it(new rt(.295,.295),l.clone()),[.15,.15,0]],[new et(b,f),[.18,.3,0],null,[.125,1,1]],[new et(b,f),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new it(new rt(.295,.295),c.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new et(b,m),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new et(b,m),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new it(new rt(.295,.295),p.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new et(b,w),[.18,0,.3],null,[.125,1,1]],[new et(b,w),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},S={X:[[new it(new Be(.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new it(new Be(.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new it(new Be(.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new it(new at(.2,0),n)]],XY:[[new it(new rt(.4,.4),n),[.2,.2,0]]],YZ:[[new it(new rt(.4,.4),n),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new it(new rt(.4,.4),n),[.2,0,.2],[-Math.PI/2,0,0]]]},M={START:[[new it(new at(.01,2),i),null,null,null,"helper"]],END:[[new it(new at(.01,2),i),null,null,null,"helper"]],DELTA:[[new et(function(){const e=new Ne;return e.setAttribute("position",new Je([0,0,0,1,1,1],3)),e}(),i),null,null,null,"helper"]],X:[[new et(b,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new et(b,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new et(b,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},P={X:[[new et(x(1,.5),h)],[new it(new at(.04,0),o),[0,0,.99],null,[1,3,1]]],Y:[[new et(x(1,.5),d),null,[0,0,-Math.PI/2]],[new it(new at(.04,0),s),[0,0,.99],null,[3,1,1]]],Z:[[new et(x(1,.5),u),null,[0,Math.PI/2,0]],[new it(new at(.04,0),a),[.99,0,0],null,[1,3,1]]],E:[[new et(x(1.25,1),g),null,[0,Math.PI/2,0]],[new it(new Be(.03,0,.15,4,1,!1),g),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new it(new Be(.03,0,.15,4,1,!1),g),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new it(new Be(.03,0,.15,4,1,!1),g),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new it(new Be(.03,0,.15,4,1,!1),g),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new et(x(1,1),y),null,[0,Math.PI/2,0]]]},T={AXIS:[[new et(b,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},z={X:[[new it(new ht(1,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new it(new ht(1,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new it(new ht(1,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new it(new ht(1.25,.1,2,24),n)]],XYZE:[[new it(new pt(.7,10,8),n)]]},X={X:[[new it($,o),[.8,0,0],[0,0,-Math.PI/2]],[new et(b,h),null,null,[.8,1,1]]],Y:[[new it($,s),[0,.8,0]],[new et(b,d),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new it($,a),[0,0,.8],[Math.PI/2,0,0]],[new et(b,u),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new it($,l),[.85,.85,0],null,[2,2,.2]],[new et(b,f),[.855,.98,0],null,[.125,1,1]],[new et(b,f),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new it($,c),[0,.85,.85],null,[.2,2,2]],[new et(b,m),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new et(b,m),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new it($,p),[.85,0,.85],null,[2,.2,2]],[new et(b,w),[.855,0,.98],null,[.125,1,1]],[new et(b,w),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new it(new Ge(.125,.125,.125),r.clone()),[1.1,0,0]]],XYZY:[[new it(new Ge(.125,.125,.125),r.clone()),[0,1.1,0]]],XYZZ:[[new it(new Ge(.125,.125,.125),r.clone()),[0,0,1.1]]]},H={X:[[new it(new Be(.2,0,.8,4,1,!1),n),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new it(new Be(.2,0,.8,4,1,!1),n),[0,.5,0]]],Z:[[new it(new Be(.2,0,.8,4,1,!1),n),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new it($,n),[.85,.85,0],null,[3,3,.2]]],YZ:[[new it($,n),[0,.85,.85],null,[.2,3,3]]],XZ:[[new it($,n),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new it(new Ge(.2,.2,.2),n),[1.1,0,0]]],XYZY:[[new it(new Ge(.2,.2,.2),n),[0,1.1,0]]],XYZZ:[[new it(new Ge(.2,.2,.2),n),[0,0,1.1]]]},k={X:[[new et(b,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new et(b,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new et(b,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function Y(e){const t=new st;for(const n in e)for(let i=e[n].length;i--;){const o=e[n][i][0].clone(),s=e[n][i][1],a=e[n][i][2],r=e[n][i][3],l=e[n][i][4];o.name=n,o.tag=l,s&&o.position.set(s[0],s[1],s[2]),a&&o.rotation.set(a[0],a[1],a[2]),r&&o.scale.set(r[0],r[1],r[2]),o.updateMatrix();const c=o.geometry.clone();c.applyMatrix4(o.matrix),o.geometry=c,o.renderOrder=1/0,o.position.set(0,0,0),o.rotation.set(0,0,0),o.scale.set(1,1,1),t.add(o)}return t}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=Y(E)),this.add(this.gizmo.rotate=Y(P)),this.add(this.gizmo.scale=Y(X)),this.add(this.picker.translate=Y(S)),this.add(this.picker.rotate=Y(z)),this.add(this.picker.scale=Y(H)),this.add(this.helper.translate=Y(M)),this.add(this.helper.rotate=Y(T)),this.add(this.helper.scale=Y(k)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t="local"===("scale"===this.mode?this.space:"local")?this.worldQuaternion:_t;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let n=[];n=n.concat(this.picker[this.mode].children),n=n.concat(this.gizmo[this.mode].children),n=n.concat(this.helper[this.mode].children);for(let i=0;i<n.length;i++){const e=n[i];let o;if(e.visible=!0,e.rotation.set(0,0,0),e.position.copy(this.worldPosition),o=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),e.scale.set(1,1,1).multiplyScalar(o*this.size/7),"helper"!==e.tag){if(e.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){const n=.99,i=.2,o=0;"X"!==e.name&&"XYZX"!==e.name||Math.abs(Ht.copy(Zt).applyQuaternion(t).dot(this.eye))>n&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"Y"!==e.name&&"XYZY"!==e.name||Math.abs(Ht.copy(Ct).applyQuaternion(t).dot(this.eye))>n&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"Z"!==e.name&&"XYZZ"!==e.name||Math.abs(Ht.copy(Lt).applyQuaternion(t).dot(this.eye))>n&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"XY"===e.name&&Math.abs(Ht.copy(Lt).applyQuaternion(t).dot(this.eye))<i&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"YZ"===e.name&&Math.abs(Ht.copy(Zt).applyQuaternion(t).dot(this.eye))<i&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"XZ"===e.name&&Math.abs(Ht.copy(Ct).applyQuaternion(t).dot(this.eye))<i&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),-1!==e.name.search("X")&&(Ht.copy(Zt).applyQuaternion(t).dot(this.eye)<o?"fwd"===e.tag?e.visible=!1:e.scale.x*=-1:"bwd"===e.tag&&(e.visible=!1)),-1!==e.name.search("Y")&&(Ht.copy(Ct).applyQuaternion(t).dot(this.eye)<o?"fwd"===e.tag?e.visible=!1:e.scale.y*=-1:"bwd"===e.tag&&(e.visible=!1)),-1!==e.name.search("Z")&&(Ht.copy(Lt).applyQuaternion(t).dot(this.eye)<o?"fwd"===e.tag?e.visible=!1:e.scale.z*=-1:"bwd"===e.tag&&(e.visible=!1))}else"rotate"===this.mode&&(jt.copy(t),Ht.copy(this.eye).applyQuaternion(ft.copy(t).invert()),-1!==e.name.search("E")&&e.quaternion.setFromRotationMatrix(Yt.lookAt(this.eye,kt,Ct)),"X"===e.name&&(ft.setFromAxisAngle(Zt,Math.atan2(-Ht.y,Ht.z)),ft.multiplyQuaternions(jt,ft),e.quaternion.copy(ft)),"Y"===e.name&&(ft.setFromAxisAngle(Ct,Math.atan2(Ht.x,Ht.z)),ft.multiplyQuaternions(jt,ft),e.quaternion.copy(ft)),"Z"===e.name&&(ft.setFromAxisAngle(Lt,Math.atan2(Ht.y,Ht.x)),ft.multiplyQuaternions(jt,ft),e.quaternion.copy(ft)));e.visible=e.visible&&(-1===e.name.indexOf("X")||this.showX),e.visible=e.visible&&(-1===e.name.indexOf("Y")||this.showY),e.visible=e.visible&&(-1===e.name.indexOf("Z")||this.showZ),e.visible=e.visible&&(-1===e.name.indexOf("E")||this.showX&&this.showY&&this.showZ),e.material._opacity=e.material._opacity||e.material.opacity,e.material._color=e.material._color||e.material.color.clone(),e.material.color.copy(e.material._color),e.material.opacity=e.material._opacity,this.enabled?this.axis&&(e.name===this.axis||this.axis.split("").some((function(t){return e.name===t}))?(e.material.opacity=1,e.material.color.lerp(new Ve(1,1,1),.5)):(e.material.opacity*=.25,e.material.color.lerp(new Ve(1,1,1),.5))):(e.material.opacity*=.5,e.material.color.lerp(new Ve(1,1,1),.5))}else e.visible=!1,"AXIS"===e.name?(e.position.copy(this.worldPositionStart),e.visible=!!this.axis,"X"===this.axis&&(ft.setFromEuler(Xt.set(0,0,0)),e.quaternion.copy(t).multiply(ft),Math.abs(Ht.copy(Zt).applyQuaternion(t).dot(this.eye))>.9&&(e.visible=!1)),"Y"===this.axis&&(ft.setFromEuler(Xt.set(0,0,Math.PI/2)),e.quaternion.copy(t).multiply(ft),Math.abs(Ht.copy(Ct).applyQuaternion(t).dot(this.eye))>.9&&(e.visible=!1)),"Z"===this.axis&&(ft.setFromEuler(Xt.set(0,Math.PI/2,0)),e.quaternion.copy(t).multiply(ft),Math.abs(Ht.copy(Lt).applyQuaternion(t).dot(this.eye))>.9&&(e.visible=!1)),"XYZE"===this.axis&&(ft.setFromEuler(Xt.set(0,Math.PI/2,0)),Ht.copy(this.rotationAxis),e.quaternion.setFromRotationMatrix(Yt.lookAt(kt,Ht,Ct)),e.quaternion.multiply(ft),e.visible=this.dragging),"E"===this.axis&&(e.visible=!1)):"START"===e.name?(e.position.copy(this.worldPositionStart),e.visible=this.dragging):"END"===e.name?(e.position.copy(this.worldPosition),e.visible=this.dragging):"DELTA"===e.name?(e.position.copy(this.worldPositionStart),e.quaternion.copy(this.worldQuaternionStart),mt.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),mt.applyQuaternion(this.worldQuaternionStart.clone().invert()),e.scale.copy(mt),e.visible=this.dragging):(e.quaternion.copy(t),this.dragging?e.position.copy(this.worldPositionStart):e.position.copy(this.worldPosition),this.axis&&(e.visible=-1!==this.axis.search(e.name)))}super.updateMatrixWorld(e)}}Ot.prototype.isTransformControlsGizmo=!0;class Wt extends it{constructor(){super(new rt(1e5,1e5,2,2),new ot({visible:!1,wireframe:!0,side:Ue,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(t="local"),Dt.copy(Zt).applyQuaternion("local"===t?this.worldQuaternion:_t),Qt.copy(Ct).applyQuaternion("local"===t?this.worldQuaternion:_t),At.copy(Lt).applyQuaternion("local"===t?this.worldQuaternion:_t),Ht.copy(Qt),this.mode){case"translate":case"scale":switch(this.axis){case"X":Ht.copy(this.eye).cross(Dt),It.copy(Dt).cross(Ht);break;case"Y":Ht.copy(this.eye).cross(Qt),It.copy(Qt).cross(Ht);break;case"Z":Ht.copy(this.eye).cross(At),It.copy(At).cross(Ht);break;case"XY":It.copy(At);break;case"YZ":It.copy(Dt);break;case"XZ":Ht.copy(At),It.copy(Qt);break;case"XYZ":case"E":It.set(0,0,0)}break;case"rotate":default:It.set(0,0,0)}0===It.length()?this.quaternion.copy(this.cameraQuaternion):(Rt.lookAt(mt.set(0,0,0),It,Ht),this.quaternion.setFromRotationMatrix(Rt)),super.updateMatrixWorld(e)}}Wt.prototype.isTransformControlsPlane=!0;const Ft=window.THREE;class qt extends Ft.Object3D{constructor(e,n=null){super(),t(this,"animating",!1),t(this,"controls",null),t(this,"render"),t(this,"handleClick"),t(this,"isViewHelper"),t(this,"update"),this.animating=!1,this.controls=null;const i=new Ft.Color("#ff3653"),o=new Ft.Color("#8adb00"),s=new Ft.Color("#2c8fff"),a=[],r=new Ft.Raycaster,l=new Ft.Vector2,c=new Ft.Object3D,p=new Ft.OrthographicCamera(-2,2,2,-2,0,4);p.position.set(0,0,2);const h=new Ft.BoxGeometry(.8,.05,.05).translate(.4,0,0),d=new Ft.Mesh(h,H(i)),u=new Ft.Mesh(h,H(o)),m=new Ft.Mesh(h,H(s));u.rotation.z=Math.PI/2,m.rotation.y=-Math.PI/2,this.add(d),this.add(m),this.add(u);const w=new Ft.Sprite(k(i,"X"));w.userData.type="posX";const f=new Ft.Sprite(k(o,"Y"));f.userData.type="posY";const y=new Ft.Sprite(k(s,"Z"));y.userData.type="posZ";const g=new Ft.Sprite(k(i));g.userData.type="negX";const v=new Ft.Sprite(k(o));v.userData.type="negY";const $=new Ft.Sprite(k(s));$.userData.type="negZ",w.position.x=1,f.position.y=1,y.position.z=1,g.position.x=-1,g.scale.setScalar(.8),v.position.y=-1,v.scale.setScalar(.8),$.position.z=-1,$.scale.setScalar(.8),this.add(w),this.add(f),this.add(y),this.add(g),this.add(v),this.add($),a.push(w),a.push(f),a.push(y),a.push(g),a.push(v),a.push($);const b=new Ft.Vector3,x=128,E=2*Math.PI;this.render=function(t){this.quaternion.copy(e.quaternion).invert(),this.updateMatrixWorld(),b.set(0,0,1),b.applyQuaternion(e.quaternion),b.x>=0?(w.material.opacity=1,g.material.opacity=.5):(w.material.opacity=.5,g.material.opacity=1),b.y>=0?(f.material.opacity=1,v.material.opacity=.5):(f.material.opacity=.5,v.material.opacity=1),b.z>=0?(y.material.opacity=1,$.material.opacity=.5):(y.material.opacity=.5,$.material.opacity=1);const i=n.dom.clientWidth-x+(n.dom.width-n.dom.clientWidth);t.clearDepth(),t.setViewport(i,0,x,x),p.updateProjectionMatrix(),t.render(this,p)};const S=new Ft.Vector3,M=new Ft.Quaternion,P=new Ft.Quaternion,T=new Ft.Quaternion;let z=0,X=n.dom;function H(e){return new Ft.MeshBasicMaterial({color:e,toneMapped:!1})}function k(e,t=null){const n=document.createElement("canvas");n.width=64,n.height=64;const i=n.getContext("2d");i.beginPath(),i.arc(32,32,16,0,2*Math.PI),i.closePath(),i.fillStyle=e.getStyle(),i.fill(),null!==t&&(i.font="24px Arial",i.textAlign="center",i.fillStyle="#000000",i.fillText(t,32,41));const o=new Ft.CanvasTexture(n);return new Ft.SpriteMaterial({map:o,toneMapped:!1})}L.addListener(D.onPointerDown,(t=>{let i=n.dom.clientWidth-x,o=n.dom.clientHeight-x,s=t.clientX-X.offsetLeft,h=t.clientY-X.offsetTop;l.x=(s-i)/x*2-1,l.y=-(h-o)/x*2+1,r.setFromCamera(l,p);const d=r.intersectObjects(a);if(d.length>0){return function(t,n){switch(t.userData.type){case"posX":S.set(1,0,0),M.setFromEuler(new Ft.Euler(0,.5*Math.PI,0));break;case"posY":S.set(0,1,0),M.setFromEuler(new Ft.Euler(.5*-Math.PI,0,0));break;case"posZ":S.set(0,0,1),M.setFromEuler(new Ft.Euler);break;case"negX":S.set(-1,0,0),M.setFromEuler(new Ft.Euler(0,.5*-Math.PI,0));break;case"negY":S.set(0,-1,0),M.setFromEuler(new Ft.Euler(.5*Math.PI,0,0));break;case"negZ":S.set(0,0,-1),M.setFromEuler(new Ft.Euler(0,Math.PI,0));break;default:console.error("ViewHelper: Invalid axis.")}z=e.position.distanceTo(n),S.multiplyScalar(z).add(n),c.position.copy(n),c.lookAt(e.position),P.copy(c.quaternion),c.lookAt(S),T.copy(c.quaternion)}(d[0].object,this.controls.center),this.animating=!0,!0}return!1})),this.update=function(t){const n=t*E,i=this.controls.center;P.rotateTowards(T,n),e.position.set(0,0,1).applyQuaternion(P).multiplyScalar(z).add(i),e.quaternion.rotateTowards(M,n),0===P.angleTo(T)&&(this.animating=!1)}}}qt.prototype.isViewHelper=!0;const Gt=new Map;let Nt=100;var Vt=Object.defineProperty,Bt=Object.getOwnPropertyDescriptor;"undefined"!=typeof require&&require;var Ut,Kt;(Kt=Ut||(Ut={}))[Kt.group=0]="group",Kt[Kt.box=1]="box",Kt[Kt.sphere=2]="sphere",Kt[Kt.directionalLight=3]="directionalLight";class Jt{create(e){switch(e){case 1:return this.createBox();case 2:return this.createSphere();case 3:return this.createDirectionalLight();default:return null}}createBox(){let e=new THREE.BoxGeometry,t=new THREE.MeshStandardMaterial,n=new THREE.Mesh(e,t);return n.name="Box",{object:n,helper:null}}createSphere(){let e=new THREE.SphereGeometry,t=new THREE.MeshStandardMaterial,n=new THREE.Mesh(e,t);return n.name="Sphere",{object:n,helper:null}}createAmbientLight(){const e=new THREE.AmbientLight(4210752,1);return e.position.set(1,1,1),{object:e,helper:null}}createDirectionalLight(){const e=new THREE.DirectionalLight(16777215,1);e.position.set(5,10,7.5);let t=new THREE.DirectionalLightHelper(e,1);e.name="DirectionalLight";var n=new THREE.SphereGeometry(2,4,2),i=new THREE.MeshBasicMaterial({color:16711680,visible:!1}),o=new THREE.Mesh(n,i);return o.name="picker",o.userData.object=e,t.add(o),{object:e,helper:t}}}t(Jt,"inst"),((e,t,n,i)=>{for(var o,s=i>1?void 0:i?Bt(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(t,n,s):o(s))||s);i&&s&&Vt(t,n,s)})([function(e,t){Gt.has(e["#instanceId"])||(Nt++,e["#instanceId"]=Nt,Gt.set(Nt,new e)),e[t]=Gt.get(Nt)}],Jt,"inst",2);const en=window.THREE;const tn=new class{constructor(){t(this,"renderTime",null),t(this,"renderer",null),t(this,"scene",null),t(this,"camera",null),t(this,"canvas"),t(this,"tanFOV"),t(this,"canvasOldHeight"),t(this,"scenesDirectionHelper"),t(this,"objectControl"),t(this,"scenesControl"),t(this,"raycaster"),t(this,"mouse"),t(this,"objects",[]),t(this,"selectHelper"),t(this,"dt")}init(e){this.canvas||(this.canvas=e,this.raycaster=new en.Raycaster,this.mouse=new en.Vector2,this.renderTime=new en.Clock,this.renderer=new en.WebGLRenderer({canvas:e,context:e.getContext("webgl2"),alpha:!0,antialias:!0}),this.renderer.setClearColor(11184810),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=en.PCFSoftShadowMap,this.scene=new en.Scene,this.camera=new en.PerspectiveCamera(50,e.clientWidth/e.clientHeight,.01,1e3),this.camera.position.set(0,5,10),this.camera.lookAt(new en.Vector3),this.renderer.setAnimationLoop((()=>{this.animate()})),setTimeout((()=>{this.renderer.setSize(e.offsetWidth,e.clientHeight,!1),this.tanFOV=Math.tan(Math.PI/180*this.camera.fov/2),this.canvasOldHeight=e.clientHeight})),this.scenesControl=new qe(this.camera,this.canvas),this.scenesControl.addEventListener("change",(()=>{})),this.addFloorGrid(),this.objectControl=this.objectSelect(),this.addScenesDirectionHelper(),L.addListener(D.resize,this.resize,this),L.addListener(D.updateScenesSize,this.resize,this),L.addListener(D.addObject,this.addObject,this),this.addObject(Ut.box),this.addObject(Ut.directionalLight))}addObject(e){let t=Jt.inst.create(e);if(t){if(this.scene.add(t.object),t.helper){this.scene.add(t.helper);var n=t.helper.getObjectByName("picker");void 0!==n&&this.objects.push(n)}this.objects.push(t.object)}}addScenesDirectionHelper(){let e=new qt(this.camera,{dom:this.canvas});e.controls=this.scenesControl,this.scenesDirectionHelper=e,L.addListener(D.update,(()=>{!0===e.animating&&e.update(this.dt)}))}objectSelect(){let e=new xt(this.camera,this.canvas);this.scene.add(e),e.addEventListener("change",(()=>{A.update((e=>e))})),e.addEventListener("dragging-changed",(e=>{this.scenesControl.enabled=!e.value}));let t=new en.Vector2,n=new en.Vector2;return L.addListener(D.onPointerDown,(e=>{e.target==this.canvas&&t.set(e.clientX,e.clientY)})),L.addListener(D.onPointerUp,(i=>{if(i.target!=this.canvas||!this.objects.length)return;if(n.set(i.clientX,i.clientY),t.distanceTo(n))return;let o=this.getSelectObjectIntersects({x:i.clientX-this.canvas.offsetLeft,y:i.clientY-this.canvas.offsetTop},this.objects);if(o.length>0){let t=o[0].object;void 0!==t.userData.object?(e.attach(t.userData.object),A.set(t.userData.object),console.log(t.userData.object),"picker"===t.name&&(O.set(t.parent),this.selectHelper=t.parent,e.setMode("translate"))):(e.attach(t),A.set(t),this.selectHelper=null,O.set(null),console.log(t))}else e.detach(),A.set(null),O.set(null),this.selectHelper=null})),L.addListener(D.onDoubleClick,(e=>{if(e.target!=this.canvas)return;let t=this.getSelectObjectIntersects({x:e.clientX-this.canvas.offsetLeft,y:e.clientY-this.canvas.offsetTop},this.objects);if(t.length>0){let e=t[0].object;this.scenesControl.focus(e)}})),L.addListener(D.onKeyDown,(t=>{switch(t.key){case"Shift":e.setTranslationSnap(1),e.setRotationSnap(en.MathUtils.degToRad(15)),e.setScaleSnap(.25);break;case"w":case"W":e.setMode("translate");break;case"e":this.selectHelper||e.setMode("rotate");break;case"r":this.selectHelper||e.setMode("scale");break;case"+":e.setSize(e.size+.1);break;case"-":e.setSize(Math.max(e.size-.1,.1));break;case"X":case"x":e.showX=!e.showX;break;case"y":case"Y":e.showY=!e.showY;break;case"z":case"Z":e.showZ=!e.showZ;break;case" ":e.enabled=!e.enabled}})),L.addListener(D.onKeyUp,(t=>{switch(t.key){case"Shift":e.setTranslationSnap(null),e.setRotationSnap(null),e.setScaleSnap(null)}})),e}addFloorGrid(){var e=new en.Group,t=new en.GridHelper(30,30,12961221);t.material.color.setHex(12961221),t.material.vertexColors=!1,e.add(t);var n=new en.GridHelper(30,6,7829367);n.material.color.setHex(7829367),n.material.depthFunc=en.AlwaysDepth,n.material.vertexColors=!1,e.add(n),this.scene.add(e)}getSelectObjectIntersects(e,t){return this.mouse.set(e.x/this.canvas.clientWidth*2-1,-e.y/this.canvas.clientHeight*2+1),this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.intersectObjects(t)}animate(){this.renderer.setViewport(0,0,this.canvas.clientWidth+(this.canvas.width-this.canvas.clientWidth),this.canvas.clientHeight+(this.canvas.height-this.canvas.clientHeight)),this.renderer.render(this.scene,this.camera),this.dt=this.renderTime.getDelta(),this.renderer.autoClear=!1,this.scenesDirectionHelper.render(this.renderer),this.renderer.autoClear=!0,L.emit(D.update,this.dt),this.camera.updateProjectionMatrix()}resize(){this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight,!1),this.camera.aspect=this.canvas.clientWidth/this.canvas.clientHeight,this.camera.fov=360/Math.PI*Math.atan(this.tanFOV*(this.canvas.clientHeight/this.canvasOldHeight)),this.camera.updateProjectionMatrix()}};function nn(e){let t;return{c(){t=d("canvas"),w(t,"class","h-full w-full flex-grow select-none")},m(n,i){f(n,t,i),e[1](t)},p:I,i:I,o:I,d(n){n&&x(t),e[1](null)}}}function on(e,t,n){let i;return R((()=>{tn.init(i)})),[i,function(e){Z[e?"unshift":"push"]((()=>{i=e,n(0,i)}))}]}class sn extends o{constructor(e){super(),s(this,e,on,nn,a,{})}}function an(e){let t,n,i;return{c(){t=d("div"),w(t,"class","hover:bg-yellow-300 transition-colors duration-50 h-full w-2 cursor-col-resize -translate-x-1 absolute left-0 top-0 select-none")},m(o,s){f(o,t,s),e[6](t),n||(i=[g(window,"mouseup",e[3]),g(window,"mousemove",e[2]),g(t,"mousedown",e[1])],n=!0)},p:I,i:I,o:I,d(o){o&&x(t),e[6](null),n=!1,_(i)}}}function rn(e,t,n){let i=null,o=!1,s=0,a=0,{resizeEvent:r=null}=t,{resizeEventMouseUp:l=null}=t;return R((()=>{})),e.$$set=e=>{"resizeEvent"in e&&n(4,r=e.resizeEvent),"resizeEventMouseUp"in e&&n(5,l=e.resizeEventMouseUp)},[i,function(e){o=!0,s=e.pageX,a=i.parentElement.clientWidth},function(e){if(o){let t=a+s-e.pageX;(document.documentElement.clientWidth-t<50||document.documentElement.clientWidth-t>document.documentElement.clientWidth-50)&&(t=i.parentElement.clientWidth),n(0,i.parentElement.style.width=`${t}px`,i),r&&r()}},function(e){l&&o&&l(),o=!1},r,l,function(e){Z[e?"unshift":"push"]((()=>{i=e,n(0,i)}))}]}class ln extends o{constructor(e){super(),s(this,e,rn,an,a,{resizeEvent:4,resizeEventMouseUp:5})}}const cn=[{title:"文件",child:[{title:"文件",event:()=>{console.log(1)},line:!1,enabled:!1},{title:"导入",event:()=>{console.log(1)},line:!1,enabled:!1}]},{title:"编辑",child:[{title:"拷贝",event:()=>{console.log(1)},line:!1,enabled:!1},{title:"删除",event:()=>{console.log(1)},line:!1,enabled:!1}]},{title:"添加",child:[{title:"组",event:()=>{L.emit(D.addObject,Ut.group)},line:!0,enabled:!1},{title:"正方体",event:()=>{L.emit(D.addObject,Ut.box)},line:!1,enabled:!0},{title:"圆",event:()=>{L.emit(D.addObject,Ut.sphere)},line:!0,enabled:!0},{title:"环境光",event:()=>{L.emit(D.addObject,Ut.ambientLight)},enabled:!1},{title:"平行光",event:()=>{L.emit(D.addObject,Ut.directionalLight)},line:!1,enabled:!0},{title:"半光球",event:()=>{console.log(1)},line:!1},{title:"点光源",event:()=>{console.log(1)},line:!1}]},{title:"帮助",child:[]}];function pn(e,t,n){const i=e.slice();return i[9]=t[n],i}function hn(e,t,n){const i=e.slice();return i[9]=t[n],i[13]=n,i}function dn(e){let t,n,i,o,s,a=e[9].title+"";function r(...t){return e[6](e[13],...t)}return{c(){t=d("div"),n=u(a),i=m(),w(t,"class","hover:bg-gray-300 hover:text-gray-600 inline-block px-3 cursor-pointer text-gray-500 float-left")},m(a,l){f(a,t,l),y(t,n),y(t,i),o||(s=[g(t,"mouseenter",r),g(t,"mouseleave",e[5])],o=!0)},p(t,n){e=t},d(e){e&&x(t),o=!1,_(s)}}}function un(e){let t,n=e[3][e[2]].child,i=[];for(let o=0;o<n.length;o+=1)i[o]=wn(pn(e,n,o));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=T()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);f(e,t,n)},p(e,o){if(12&o){let s;for(n=e[3][e[2]].child,s=0;s<n.length;s+=1){const a=pn(e,n,s);i[s]?i[s].p(a,o):(i[s]=wn(a),i[s].c(),i[s].m(t.parentNode,t))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(e){X(i,e),e&&x(t)}}}function mn(e){let t;return{c(){t=d("div"),t.innerHTML="<div></div> \n                        <div></div> \n                    ",w(t,"class","divide-y divide-gray-300")},m(e,n){f(e,t,n)},d(e){e&&x(t)}}}function wn(e){let t,n,i,o,s,a,r,l=e[9].title+"",c=e[9].line&&mn();return{c(){t=d("div"),n=u(l),o=m(),c&&c.c(),s=T(),w(t,"class",i=(e[9].enabled?"hover:bg-pink-800 hover:text-white cursor-pointer ":" cursor-not-allowed  text-gray-300")+" px-2 py-1")},m(i,l){f(i,t,l),y(t,n),f(i,o,l),c&&c.m(i,l),f(i,s,l),a||(r=g(t,"click",(function(){C(e[9].enabled?e[9].event:null)&&(e[9].enabled?e[9].event:null).apply(this,arguments)})),a=!0)},p(o,a){e=o,4&a&&l!==(l=e[9].title+"")&&v(n,l),4&a&&i!==(i=(e[9].enabled?"hover:bg-pink-800 hover:text-white cursor-pointer ":" cursor-not-allowed  text-gray-300")+" px-2 py-1")&&w(t,"class",i),e[9].line?c||(c=mn(),c.c(),c.m(s.parentNode,s)):c&&(c.d(1),c=null)},d(e){e&&x(t),e&&x(o),c&&c.d(e),e&&x(s),a=!1,r()}}}function fn(e){var t;let n,i,o,s,a,r,l=e[3],c=[];for(let h=0;h<l.length;h+=1)c[h]=dn(hn(e,l,h));let p=e[3][e[2]]&&(null==(t=e[3][e[2]].child)?void 0:t.length)&&e[1]&&un(e);return{c(){n=d("div"),i=d("div");for(let e=0;e<c.length;e+=1)c[e].c();o=m(),s=d("div"),p&&p.c(),w(i,"class","overflow-hidden leading-6"),w(s,"class","w-40 absolute bg-gray-200 transition-transform duration-100 "),w(n,"class","relative select-none ")},m(t,l){f(t,n,l),y(n,i);for(let e=0;e<c.length;e+=1)c[e].m(i,null);y(n,o),y(n,s),p&&p.m(s,null),e[7](s),a||(r=[g(s,"mouseenter",e[8]),g(s,"mouseleave",e[5])],a=!0)},p(e,[t]){var n;if(56&t){let n;for(l=e[3],n=0;n<l.length;n+=1){const o=hn(e,l,n);c[n]?c[n].p(o,t):(c[n]=dn(o),c[n].c(),c[n].m(i,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}e[3][e[2]]&&(null==(n=e[3][e[2]].child)?void 0:n.length)&&e[1]?p?p.p(e,t):(p=un(e),p.c(),p.m(s,null)):p&&(p.d(1),p=null)},i:I,o:I,d(t){t&&x(n),X(c,t),p&&p.d(),e[7](null),a=!1,_(r)}}}function yn(e,t,n){let i,o=!1,s=cn,a=null;function r(e,t){if(n(1,o=!0),n(2,a=t),!s[t].child.length)return;let r=e.target;n(0,i.style.transform=`translateX(${r.offsetLeft}px)`,i)}return[i,o,a,s,r,function(){n(1,o=!1)},(e,t)=>{r(t,e)},function(e){Z[e?"unshift":"push"]((()=>{i=e,n(0,i)}))},e=>{n(1,o=!0)}]}class gn extends o{constructor(e){super(),s(this,e,yn,fn,a,{})}}function vn(e){let t,n,i,o,s,a,r,l,c,u,g,v,$,b,E;return i=new gn({}),r=new sn({}),u=new ln({props:{resizeEventMouseUp:e[0]}}),v=new We({}),{c(){t=d("div"),n=d("div"),S(i.$$.fragment),o=m(),s=d("div"),a=d("div"),S(r.$$.fragment),l=m(),c=d("div"),S(u.$$.fragment),g=m(),S(v.$$.fragment),$=m(),b=d("div"),b.innerHTML='<span class="text-xs">0</span>',w(n,"class","flex-none items-center bg-gray-200 align-text-bottom border-b-[1px] border-solid border-gray-300"),w(a,"class","flex-grow bg-gray-100 flex flex-row"),w(c,"class","flex-none bg-gray-200 w-80 relative "),w(s,"class","flex-grow h-4 flex flex-row"),w(b,"class","flex-none bg-gray-200 px-2 h-6 align-text-bottom border-t-[1px] border-solid border-gray-300"),w(t,"class","flex flex-col h-screen text-gray-500 font-sans text-sm")},m(e,p){f(e,t,p),y(t,n),M(i,n,null),y(t,o),y(t,s),y(s,a),M(r,a,null),y(s,l),y(s,c),M(u,c,null),y(c,g),M(v,c,null),y(t,$),y(t,b),E=!0},p:I,i(e){E||(p(i.$$.fragment,e),p(r.$$.fragment,e),p(u.$$.fragment,e),p(v.$$.fragment,e),E=!0)},o(e){h(i.$$.fragment,e),h(r.$$.fragment,e),h(u.$$.fragment,e),h(v.$$.fragment,e),E=!1},d(e){e&&x(t),P(i),P(r),P(u),P(v)}}}function $n(e){return[function(){L.emit(D.updateScenesSize)}]}class bn extends o{constructor(e){super(),s(this,e,$n,vn,a,{})}}function xn(e){let t,n,i,o;return t=new bn({}),{c(){S(t.$$.fragment)},m(s,a){M(t,s,a),n=!0,i||(o=[g(window,"resize",e[0]),g(window,"pointerdown",e[1]),g(window,"pointerup",e[2]),g(window,"pointermove",e[3]),g(window,"dblclick",e[4]),g(window,"keydown",e[5]),g(window,"keyup",e[6])],i=!0)},p:I,i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){P(t,e),i=!1,_(o)}}}function En(e){return[function(){L.emit(D.resize)},function(e){L.emit(D.onPointerDown,e)},function(e){L.emit(D.onPointerUp,e)},function(e){L.emit(D.onPointerMove,e)},function(e){L.emit(D.onDoubleClick,e)},function(e){L.emit(D.onKeyDown,e)},function(e){L.emit(D.onKeyUp,e)}]}new class extends o{constructor(e){super(),s(this,e,En,xn,a,{})}}({target:document.getElementById("app")});
