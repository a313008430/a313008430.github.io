var e=Object.defineProperty,t=("undefined"!=typeof require&&require,(t,n,i)=>(((t,n,i)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i})(t,"symbol"!=typeof n?n+"":n,i),i));import{e as n,w as i,S as o,i as s,s as a,u as r,g as l,a as c,t as h,b as p,c as d,d as u,f as w,h as m,j as f,k as x,l as v,m as y,n as g,o as b,p as E,q as S,r as M,v as P,x as z,y as T,z as X,A as k,B as j,C as Y,D as _,E as H,F as I,G as Z,H as C,I as L}from"./vendor.830fcdfa.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const D=new n.exports.EventEmitter;var Q,R;(R=Q||(Q={})).update="update",R.resize="resize",R.updateScenesSize="updateScenesSize",R.addObject="addObject",R.onPointerDown="onPointerDown",R.onPointerUp="onPointerUp",R.onPointerMove="onPointerMove",R.onDoubleClick="onDoubleClick",R.onKeyDown="onKeyDown",R.onKeyUp="onKeyUp";var $='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#888888">\r\n    <path d="M0 0h24v24H0V0z" fill="none" />\r\n    <path d="M10 17l5-5-5-5v10z" />\r\n</svg>',A=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:$});var O={selectObject:i(null),selectHelper:i(null)};function q(e){let t;const n=e[3].default,i=S(n,e,e[2],null);return{c(){i&&i.c()},m(e,n){i&&i.m(e,n),t=!0},p(e,o){i&&i.p&&(!t||4&o)&&r(i,n,e,e[2],t?c(n,e[2],o,null):l(e[2]),null)},i(e){t||(h(i,e),t=!0)},o(e){p(i,e),t=!1},d(e){i&&i.d(e)}}}function F(e){let t,n,i,o,s,a,r,l,c,S=e[0]&&q(e);return{c(){t=d("div"),n=d("div"),i=d("i"),s=u(e[1]),a=w(),S&&S.c(),m(i,"class",o="float-left overflow-hidden block transition-transform duration-300 "+(e[0]?"rotate-90":"rotate-0")),m(n,"class","bg-gray-300 h-6 leading-6 cursor-pointer select-none "),m(t,"class","border-t border-b border-t-gray-400 border-b-gray-300 my-1")},m(o,h){f(o,t,h),x(t,n),x(n,i),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#888888">\r\n    <path d="M0 0h24v24H0V0z" fill="none" />\r\n    <path d="M10 17l5-5-5-5v10z" />\r\n</svg>',x(n,s),x(t,a),S&&S.m(t,null),r=!0,l||(c=v(n,"click",e[4]),l=!0)},p(e,[n]){(!r||1&n&&o!==(o="float-left overflow-hidden block transition-transform duration-300 "+(e[0]?"rotate-90":"rotate-0")))&&m(i,"class",o),(!r||2&n)&&y(s,e[1]),e[0]?S?(S.p(e,n),1&n&&h(S,1)):(S=q(e),S.c(),h(S,1),S.m(t,null)):S&&(g(),p(S,1,1,(()=>{S=null})),b())},i(e){r||(h(S),r=!0)},o(e){p(S),r=!1},d(e){e&&E(t),S&&S.d(),l=!1,c()}}}function W(e,t,n){let{$$slots:i={},$$scope:o}=t,{title:s="title"}=t,{open:a=!0}=t;console.log(A);return e.$$set=e=>{"title"in e&&n(1,s=e.title),"open"in e&&n(0,a=e.open),"$$scope"in e&&n(2,o=e.$$scope)},[a,s,o,i,()=>{n(0,a=!a)}]}class V extends o{constructor(e){super(),s(this,e,W,F,a,{title:1,open:0})}}function U(e){let t,n,i,o,s,a,r,l,c,g,b,S,k,j,Y,_,H,I,Z,C,L,D,Q,R,$,A,O,q,F,W,U,B,N,K,J,ee,te,ne,ie,oe,se,ae,re,le,ce,he,pe,de,ue,we,me,fe=e[0].type+"",xe=e[0].uuid+"";D=new V({props:{title:"Transform",$$slots:{default:[G]},$$scope:{ctx:e}}});return{c(){t=d("div"),n=d("span"),n.textContent="Type",i=w(),o=d("span"),s=u(fe),a=w(),r=d("div"),l=d("span"),l.textContent="UUID",c=w(),g=d("span"),b=u(xe),k=w(),j=d("div"),Y=d("span"),Y.textContent="Name",_=w(),H=d("span"),I=d("div"),Z=d("input"),L=w(),M(D.$$.fragment),Q=w(),R=d("div"),$=d("span"),$.textContent="Visible",A=w(),O=d("span"),q=d("input"),F=w(),W=d("div"),U=d("span"),U.textContent="Frustum Cull",B=w(),N=d("span"),K=d("input"),J=w(),ee=d("div"),te=d("span"),te.textContent="Shadow",ne=w(),ie=d("span"),oe=d("input"),se=w(),ae=d("label"),ae.textContent="cost",re=w(),le=d("input"),ce=w(),he=d("label"),he.textContent="receive",pe=w(),de=P(),m(n,"class","flex-shrink-0 whitespace-nowrap w-1/4 min-w-[50px] "),m(o,"class","flex-grow "),m(t,"class","flex flex-wrap px-3"),m(l,"class","flex-shrink-0 whitespace-nowrap w-1/4 min-w-[50px] "),m(g,"class","flex-grow whitespace-nowrap overflow-hidden"),m(g,"title",S=e[0].uuid),m(r,"class","flex px-3"),m(Y,"class","flex-shrink-0 whitespace-nowrap w-1/4 min-w-[50px]"),m(Z,"type","text"),m(Z,"class","outline-none w-full min-w-[40px] px-1 flex-1 h-6 cursor-row-resize rounded-md "),Z.value=C=e[0].name,m(I,"class","flex-1 flex items-center"),m(H,"class","flex-grow flex flex-row space-x-1 whitespace-nowrap"),m(j,"class","flex px-3"),m($,"class","flex-shrink-0 whitespace-nowrap w-1/4 min-w-[50px]"),m(q,"type","checkbox"),m(q,"class","outline-none px-1 h-4 w-4 rounded-md"),m(O,"class","flex-grow flex items-center whitespace-nowrap "),m(R,"class","px-3 flex"),m(U,"class","flex-shrink-0 leading-4 w-1/4 min-w-[50px]"),m(K,"type","checkbox"),m(K,"class","outline-none px-1 h-4 w-4 rounded-md"),m(N,"class","flex-grow flex items-center whitespace-nowrap "),m(W,"class","px-3 flex"),m(te,"class","flex-shrink-0 whitespace-nowrap w-1/4 min-w-[50px]"),m(oe,"id","cost"),m(oe,"type","checkbox"),m(oe,"class","outline-none px-1 h-4 w-4 rounded-md"),m(ae,"class","px-1 select-none"),m(ae,"for","cost"),m(le,"id","receive"),m(le,"type","checkbox"),m(le,"class","outline-none px-1 h-4 w-4 rounded-md"),m(he,"class","px-1 select-none"),m(he,"for","receive"),m(ie,"class","flex-grow flex items-center whitespace-nowrap "),m(ee,"class","px-3 flex")},m(h,p){f(h,t,p),x(t,n),x(t,i),x(t,o),x(o,s),f(h,a,p),f(h,r,p),x(r,l),x(r,c),x(r,g),x(g,b),f(h,k,p),f(h,j,p),x(j,Y),x(j,_),x(j,H),x(H,I),x(I,Z),f(h,L,p),z(D,h,p),f(h,Q,p),f(h,R,p),x(R,$),x(R,A),x(R,O),x(O,q),q.checked=e[0].visible,f(h,F,p),f(h,W,p),x(W,U),x(W,B),x(W,N),x(N,K),K.checked=e[0].frustumCulled,f(h,J,p),f(h,ee,p),x(ee,te),x(ee,ne),x(ee,ie),x(ie,oe),oe.checked=e[0].castShadow,x(ie,se),x(ie,ae),x(ie,re),x(ie,le),le.checked=e[0].receiveShadow,x(ie,ce),x(ie,he),f(h,pe,p),f(h,de,p),ue=!0,we||(me=[v(q,"change",e[11]),v(K,"change",e[12]),v(oe,"change",e[13]),v(le,"change",e[14])],we=!0)},p(e,t){(!ue||1&t)&&fe!==(fe=e[0].type+"")&&y(s,fe),(!ue||1&t)&&xe!==(xe=e[0].uuid+"")&&y(b,xe),(!ue||1&t&&S!==(S=e[0].uuid))&&m(g,"title",S),(!ue||1&t&&C!==(C=e[0].name)&&Z.value!==C)&&(Z.value=C);const n={};32771&t&&(n.$$scope={dirty:t,ctx:e}),D.$set(n),1&t&&(q.checked=e[0].visible),1&t&&(K.checked=e[0].frustumCulled),1&t&&(oe.checked=e[0].castShadow),1&t&&(le.checked=e[0].receiveShadow)},i(e){ue||(h(D.$$.fragment,e),ue=!0)},o(e){p(D.$$.fragment,e),ue=!1},d(e){e&&E(t),e&&E(a),e&&E(r),e&&E(k),e&&E(j),e&&E(L),T(D,e),e&&E(Q),e&&E(R),e&&E(F),e&&E(W),e&&E(J),e&&E(ee),e&&E(pe),e&&E(de),we=!1,X(me)}}}function B(e){let t,n,i,o,s,a,r,l,c,h,p,u,y,g,b,S,M,P,z,T,k,j,H,I,Z,C,L,D,Q,R,$,A,O,q,F,W,V,U,B;return{c(){t=d("div"),n=d("span"),n.textContent="Rotation",i=w(),o=d("span"),s=d("div"),a=d("span"),a.textContent="x",r=w(),l=d("input"),c=w(),h=d("div"),p=d("span"),p.textContent="y",u=w(),y=d("input"),g=w(),b=d("div"),S=d("span"),S.textContent="z",M=w(),P=d("input"),z=w(),T=d("div"),k=d("span"),k.textContent="Scale",j=w(),H=d("span"),I=d("div"),Z=d("span"),Z.textContent="x",C=w(),L=d("input"),D=w(),Q=d("div"),R=d("span"),R.textContent="y",$=w(),A=d("input"),O=w(),q=d("div"),F=d("span"),F.textContent="z",W=w(),V=d("input"),m(n,"class","flex-shrink-0 whitespace-nowrap w-1/4 min-w-[50px]"),m(a,"class","px-1"),m(l,"type","number"),m(l,"step","0.1"),m(l,"class","outline-none w-full min-w-[40px] px-1 flex-1 h-6 cursor-row-resize rounded-md "),m(s,"class","flex-1 flex items-center"),m(p,"class","px-1"),m(y,"type","number"),m(y,"step","0.1"),m(y,"class","outline-none w-full min-w-[40px] px-1 flex-1 h-6 cursor-row-resize rounded-md "),m(h,"class","flex-1 flex items-center"),m(S,"class","px-1"),m(P,"type","number"),m(P,"step","0.1"),m(P,"class","outline-none w-full min-w-[40px] px-1 flex-1 h-6 cursor-row-resize rounded-md "),m(b,"class","flex-1 flex items-center"),m(o,"class","flex-grow flex flex-row space-x-1 whitespace-nowrap"),m(t,"class","px-3 flex"),m(k,"class","flex-shrink-0 whitespace-nowrap w-1/4 min-w-[50px]"),m(Z,"class","px-1"),m(L,"type","number"),m(L,"step","0.1"),m(L,"class","outline-none w-full min-w-[40px] px-1 flex-1 h-6 cursor-row-resize rounded-md "),m(I,"class","flex-1 flex items-center"),m(R,"class","px-1"),m(A,"type","number"),m(A,"step","0.1"),m(A,"class","outline-none w-full min-w-[40px] px-1 flex-1 h-6 cursor-row-resize rounded-md "),m(Q,"class","flex-1 flex items-center"),m(F,"class","px-1"),m(V,"type","number"),m(V,"step","0.1"),m(V,"class","outline-none w-full min-w-[40px] px-1 flex-1 h-6 cursor-row-resize rounded-md "),m(q,"class","flex-1 flex items-center"),m(H,"class","flex-grow flex flex-row space-x-1 whitespace-nowrap"),m(T,"class","px-3 flex")},m(d,w){f(d,t,w),x(t,n),x(t,i),x(t,o),x(o,s),x(s,a),x(s,r),x(s,l),Y(l,e[0].rotation.x),x(o,c),x(o,h),x(h,p),x(h,u),x(h,y),Y(y,e[0].rotation.y),x(o,g),x(o,b),x(b,S),x(b,M),x(b,P),Y(P,e[0].rotation.z),f(d,z,w),f(d,T,w),x(T,k),x(T,j),x(T,H),x(H,I),x(I,Z),x(I,C),x(I,L),Y(L,e[0].scale.x),x(H,D),x(H,Q),x(Q,R),x(Q,$),x(Q,A),Y(A,e[0].scale.y),x(H,O),x(H,q),x(q,F),x(q,W),x(q,V),Y(V,e[0].scale.z),U||(B=[v(l,"input",e[5]),v(y,"input",e[6]),v(P,"input",e[7]),v(L,"input",e[8]),v(A,"input",e[9]),v(V,"input",e[10])],U=!0)},p(e,t){1&t&&_(l.value)!==e[0].rotation.x&&Y(l,e[0].rotation.x),1&t&&_(y.value)!==e[0].rotation.y&&Y(y,e[0].rotation.y),1&t&&_(P.value)!==e[0].rotation.z&&Y(P,e[0].rotation.z),1&t&&_(L.value)!==e[0].scale.x&&Y(L,e[0].scale.x),1&t&&_(A.value)!==e[0].scale.y&&Y(A,e[0].scale.y),1&t&&_(V.value)!==e[0].scale.z&&Y(V,e[0].scale.z)},d(e){e&&E(t),e&&E(z),e&&E(T),U=!1,X(B)}}}function G(e){let t,n,i,o,s,a,r,l,c,h,p,u,y,g,b,S,M,z,T,k,j,H,I=null==e[1]&&B(e);return{c(){t=d("div"),n=d("span"),n.textContent="Position",i=w(),o=d("span"),s=d("div"),a=d("span"),a.textContent="x",r=w(),l=d("input"),c=w(),h=d("div"),p=d("span"),p.textContent="y",u=w(),y=d("input"),g=w(),b=d("div"),S=d("span"),S.textContent="z",M=w(),z=d("input"),T=w(),I&&I.c(),k=P(),m(n,"class","flex-shrink-0 whitespace-nowrap w-1/4 min-w-[50px]"),m(a,"class","px-1"),m(l,"type","number"),m(l,"step","0.1"),m(l,"class","outline-none w-full min-w-[40px] px-1 flex-1 h-6 cursor-row-resize rounded-md "),m(s,"class","flex-1 flex items-center"),m(p,"class","px-1"),m(y,"type","number"),m(y,"step","0.1"),m(y,"class","outline-none w-full min-w-[40px] px-1 flex-1 h-6 cursor-row-resize rounded-md "),m(h,"class","flex-1 flex items-center"),m(S,"class","px-1"),m(z,"type","number"),m(z,"step","0.1"),m(z,"class","outline-none w-full min-w-[40px] px-1 flex-1 h-6 cursor-row-resize rounded-md "),m(b,"class","flex-1 flex items-center"),m(o,"class","flex-grow flex flex-row space-x-1 whitespace-nowrap"),m(t,"class","px-3 flex")},m(d,w){f(d,t,w),x(t,n),x(t,i),x(t,o),x(o,s),x(s,a),x(s,r),x(s,l),Y(l,e[0].position.x),x(o,c),x(o,h),x(h,p),x(h,u),x(h,y),Y(y,e[0].position.y),x(o,g),x(o,b),x(b,S),x(b,M),x(b,z),Y(z,e[0].position.z),f(d,T,w),I&&I.m(d,w),f(d,k,w),j||(H=[v(l,"input",e[2]),v(y,"input",e[3]),v(z,"input",e[4])],j=!0)},p(e,t){1&t&&_(l.value)!==e[0].position.x&&Y(l,e[0].position.x),1&t&&_(y.value)!==e[0].position.y&&Y(y,e[0].position.y),1&t&&_(z.value)!==e[0].position.z&&Y(z,e[0].position.z),null==e[1]?I?I.p(e,t):(I=B(e),I.c(),I.m(k.parentNode,k)):I&&(I.d(1),I=null)},d(e){e&&E(t),e&&E(T),I&&I.d(e),e&&E(k),j=!1,X(H)}}}function N(e){let t,n,i,o,s,a,r,l,c,v=null!=e[0]&&U(e);return{c(){t=d("div"),n=d("div"),i=d("button"),o=d("img"),a=u("Inspector"),r=w(),l=d("div"),v&&v.c(),m(o,"class","inline w-3 mx-1"),k(o.src,s="/assets/joomla.9ecfab72.svg")||m(o,"src","/assets/joomla.9ecfab72.svg"),m(o,"alt",""),m(i,"class","px-3 bg-gray-200"),m(n,"class","bg-gray-300 leading-8"),m(l,"class","content bg-gray-200 leading-8 justify-between"),m(t,"class","component-view")},m(e,s){f(e,t,s),x(t,n),x(n,i),x(i,o),x(i,a),x(t,r),x(t,l),v&&v.m(l,null),c=!0},p(e,[t]){null!=e[0]?v?(v.p(e,t),1&t&&h(v,1)):(v=U(e),v.c(),h(v,1),v.m(l,null)):v&&(g(),p(v,1,1,(()=>{v=null})),b())},i(e){c||(h(v),c=!0)},o(e){p(v),c=!1},d(e){e&&E(t),v&&v.d()}}}function K(e,t,n){let i=null,o=null;return j((()=>{o&&o.update()})),O.selectObject.subscribe((e=>{n(0,i=e),o&&o.update()})),O.selectHelper.subscribe((e=>{n(1,o=e)})),[i,o,function(){i.position.x=_(this.value),n(0,i)},function(){i.position.y=_(this.value),n(0,i)},function(){i.position.z=_(this.value),n(0,i)},function(){i.rotation.x=_(this.value),n(0,i)},function(){i.rotation.y=_(this.value),n(0,i)},function(){i.rotation.z=_(this.value),n(0,i)},function(){i.scale.x=_(this.value),n(0,i)},function(){i.scale.y=_(this.value),n(0,i)},function(){i.scale.z=_(this.value),n(0,i)},function(){i.visible=this.checked,n(0,i)},function(){i.frustumCulled=this.checked,n(0,i)},function(){i.castShadow=this.checked,n(0,i)},function(){i.receiveShadow=this.checked,n(0,i)}]}class J extends o{constructor(e){super(),s(this,e,K,N,a,{})}}const ee=window.THREE;function te(e,t){this.enabled=!0,this.center=new ee.Vector3,this.panSpeed=.002,this.zoomSpeed=.1,this.rotationSpeed=.005;var n=this,i=new ee.Vector3,o=new ee.Vector3,s=new ee.Box3,a=-1,r=0,l=1,c=2,h=a,p=this.center,d=new ee.Matrix3,u=new ee.Vector2,w=new ee.Vector2,m=new ee.Spherical,f=new ee.Sphere,x={type:"change"};function v(e){if(!1!==n.enabled){switch(e.pointerType){case"mouse":case"pen":!function(e){0===e.button?h=r:1===e.button?h=l:2===e.button&&(h=c);w.set(e.clientX,e.clientY)}(e)}t.ownerDocument.addEventListener("pointermove",y,!1),t.ownerDocument.addEventListener("pointerup",g,!1)}}function y(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){u.set(e.clientX,e.clientY);var t=u.x-w.x,i=u.y-w.y;h===r?n.rotate(o.set(-t,-i,0)):h===l?n.zoom(o.set(0,0,i)):h===c&&n.pan(o.set(-t,i,0));w.set(e.clientX,e.clientY)}(e)}}function g(e){switch(e.pointerType){case"mouse":case"pen":b()}t.ownerDocument.removeEventListener("pointermove",y,!1),t.ownerDocument.removeEventListener("pointerup",g,!1)}function b(){h=a}function E(e){!1!==n.enabled&&(e.preventDefault(),n.zoom(o.set(0,0,e.deltaY>0?1:-1)))}function S(e){e.preventDefault()}this.focus=function(t){var i;s.setFromObject(t),!1===s.isEmpty()?(s.getCenter(p),i=s.getBoundingSphere(f).radius):(p.setFromMatrixPosition(t.matrixWorld),i=.1),o.set(0,0,1),o.applyQuaternion(e.quaternion),o.multiplyScalar(4*i),e.position.copy(p).add(o),n.dispatchEvent(x)},this.pan=function(t){var i=e.position.distanceTo(p);t.multiplyScalar(i*n.panSpeed),t.applyMatrix3(d.getNormalMatrix(e.matrix)),e.position.add(t),p.add(t),n.dispatchEvent(x)},this.zoom=function(t){var i=e.position.distanceTo(p);t.multiplyScalar(i*n.zoomSpeed),t.length()>i||(t.applyMatrix3(d.getNormalMatrix(e.matrix)),e.position.add(t),n.dispatchEvent(x))},this.rotate=function(t){i.copy(e.position).sub(p),m.setFromVector3(i),m.theta+=t.x*n.rotationSpeed,m.phi+=t.y*n.rotationSpeed,m.makeSafe(),i.setFromSpherical(m),e.position.copy(p).add(i),e.lookAt(p),n.dispatchEvent(x)},this.dispose=function(){t.removeEventListener("contextmenu",S,!1),t.removeEventListener("dblclick",b,!1),t.removeEventListener("wheel",E,!1),t.removeEventListener("pointerdown",v,!1),t.removeEventListener("touchstart",T,!1),t.removeEventListener("touchmove",X,!1)},t.addEventListener("contextmenu",S,!1),t.addEventListener("dblclick",b,!1),t.addEventListener("wheel",E,!1),t.addEventListener("pointerdown",v,!1);var M=[new ee.Vector3,new ee.Vector3,new ee.Vector3],P=[new ee.Vector3,new ee.Vector3,new ee.Vector3],z=null;function T(e){if(!1!==n.enabled){switch(e.touches.length){case 1:M[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),M[1].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio);break;case 2:M[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),M[1].set(e.touches[1].pageX,e.touches[1].pageY,0).divideScalar(window.devicePixelRatio),z=M[0].distanceTo(M[1])}P[0].copy(M[0]),P[1].copy(M[1])}}function X(e){if(!1!==n.enabled){switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:M[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),M[1].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),n.rotate(M[0].sub(a(M[0],P)).multiplyScalar(-1));break;case 2:M[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),M[1].set(e.touches[1].pageX,e.touches[1].pageY,0).divideScalar(window.devicePixelRatio);var t=M[0].distanceTo(M[1]);n.zoom(o.set(0,0,z-t)),z=t;var i=M[0].clone().sub(a(M[0],P)),s=M[1].clone().sub(a(M[1],P));i.x=-i.x,s.x=-s.x,n.pan(i.add(s))}P[0].copy(M[0]),P[1].copy(M[1])}function a(e,t){var n=t[0];for(var i in t)n.distanceTo(e)>t[i].distanceTo(e)&&(n=t[i]);return n}}t.addEventListener("touchstart",T,!1),t.addEventListener("touchmove",X,!1)}te.prototype=Object.create(ee.EventDispatcher.prototype),te.prototype.constructor=te;const ne=window.THREE.BoxGeometry,ie=window.THREE.BufferGeometry,oe=window.THREE.Color,se=window.THREE.CylinderGeometry,ae=window.THREE.DoubleSide,re=window.THREE.Euler,le=window.THREE.Float32BufferAttribute,ce=window.THREE.Line,he=window.THREE.LineBasicMaterial,pe=window.THREE.Matrix4,de=window.THREE.Mesh,ue=window.THREE.MeshBasicMaterial,we=window.THREE.Object3D,me=window.THREE.OctahedronGeometry,fe=window.THREE.PlaneGeometry,xe=window.THREE.Quaternion,ve=window.THREE.Raycaster,ye=window.THREE.SphereGeometry,ge=window.THREE.TorusGeometry,be=window.THREE.Vector3,Ee=new ve,Se=new be,Me=new be,Pe=new xe,ze={X:new be(1,0,0),Y:new be(0,1,0),Z:new be(0,0,1)},Te={type:"change"},Xe={type:"mouseDown"},ke={type:"mouseUp",mode:null},je={type:"objectChange"};class Ye extends we{constructor(e,n){super(),t(this,"showX"),t(this,"showY"),t(this,"showZ"),t(this,"enabled"),void 0===n&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),n=document),this.visible=!1,this.domElement=n;const i=new Ke;this._gizmo=i,this.add(i);const o=new Je;this._plane=o,this.add(o);const s=this;function a(e,t){let n=t;Object.defineProperty(s,e,{get:function(){return void 0!==n?n:t},set:function(t){n!==t&&(n=t,o[e]=t,i[e]=t,s.dispatchEvent({type:e+"-changed",value:t}),s.dispatchEvent(Te))}}),s[e]=t,o[e]=t,i[e]=t}a("camera",e),a("object",void 0),a("enabled",!0),a("axis",null),a("mode","translate"),a("translationSnap",null),a("rotationSnap",null),a("scaleSnap",null),a("space","world"),a("size",1),a("dragging",!1),a("showX",!0),a("showY",!0),a("showZ",!0);const r=new be,l=new be,c=new xe,h=new xe,p=new be,d=new xe,u=new be,w=new be,m=new be,f=new be;a("worldPosition",r),a("worldPositionStart",l),a("worldQuaternion",c),a("worldQuaternionStart",h),a("cameraPosition",p),a("cameraQuaternion",d),a("pointStart",u),a("pointEnd",w),a("rotationAxis",m),a("rotationAngle",0),a("eye",f),this._offset=new be,this._startNorm=new be,this._endNorm=new be,this._cameraScale=new be,this._parentPosition=new be,this._parentQuaternion=new xe,this._parentQuaternionInv=new xe,this._parentScale=new be,this._worldScaleStart=new be,this._worldQuaternionInv=new xe,this._worldScale=new be,this._positionStart=new be,this._quaternionStart=new xe,this._scaleStart=new be,this._getPointer=_e.bind(this),this._onPointerDown=Ie.bind(this),this._onPointerHover=He.bind(this),this._onPointerMove=Ze.bind(this),this._onPointerUp=Ce.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(void 0===this.object||!0===this.dragging)return;Ee.setFromCamera(e,this.camera);const t=Le(this._gizmo.picker[this.mode],Ee);this.axis=t?t.object.name:null}pointerDown(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){Ee.setFromCamera(e,this.camera);const t=Le(this._plane,Ee,!0);if(t){let e=this.space;if("scale"===this.mode?e="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(e="world"),"local"===e&&"rotate"===this.mode){const e=this.rotationSnap;"X"===this.axis&&e&&(this.object.rotation.x=Math.round(this.object.rotation.x/e)*e),"Y"===this.axis&&e&&(this.object.rotation.y=Math.round(this.object.rotation.y/e)*e),"Z"===this.axis&&e&&(this.object.rotation.z=Math.round(this.object.rotation.z/e)*e)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)}this.dragging=!0,Xe.mode=this.mode,this.dispatchEvent(Xe)}}pointerMove(e){const t=this.axis,n=this.mode,i=this.object;let o=this.space;if("scale"===n?o="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(o="world"),void 0===i||null===t||!1===this.dragging||-1!==e.button)return;Ee.setFromCamera(e,this.camera);const s=Le(this._plane,Ee,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===o&&"XYZ"!==t&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===t.indexOf("X")&&(this._offset.x=0),-1===t.indexOf("Y")&&(this._offset.y=0),-1===t.indexOf("Z")&&(this._offset.z=0),"local"===o&&"XYZ"!==t?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),i.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===o&&(i.position.applyQuaternion(Pe.copy(this._quaternionStart).invert()),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(this._quaternionStart)),"world"===o&&(i.parent&&i.position.add(Se.setFromMatrixPosition(i.parent.matrixWorld)),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(Se.setFromMatrixPosition(i.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){let e=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(e*=-1),Me.set(e,e,e)}else Se.copy(this.pointStart),Me.copy(this.pointEnd),Se.applyQuaternion(this._worldQuaternionInv),Me.applyQuaternion(this._worldQuaternionInv),Me.divide(Se),-1===t.search("X")&&(Me.x=1),-1===t.search("Y")&&(Me.y=1),-1===t.search("Z")&&(Me.z=1);i.scale.copy(this._scaleStart).multiply(Me),this.scaleSnap&&(-1!==t.search("X")&&(i.scale.x=Math.round(i.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(i.scale.y=Math.round(i.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(i.scale.z=Math.round(i.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);const e=20/this.worldPosition.distanceTo(Se.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===t?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Se.copy(this.rotationAxis).cross(this.eye))*e):"X"!==t&&"Y"!==t&&"Z"!==t||(this.rotationAxis.copy(ze[t]),Se.copy(ze[t]),"local"===o&&Se.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(Se.cross(this.eye).normalize())*e),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===o&&"E"!==t&&"XYZE"!==t?(i.quaternion.copy(this._quaternionStart),i.quaternion.multiply(Pe.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),i.quaternion.copy(Pe.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),i.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(Te),this.dispatchEvent(je)}}pointerUp(e){0===e.button&&(this.dragging&&null!==this.axis&&(ke.mode=this.mode,this.dispatchEvent(ke)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function _e(e){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};{const t=e.changedTouches?e.changedTouches[0]:e,n=this.domElement.getBoundingClientRect();return{x:(t.clientX-n.left)/n.width*2-1,y:-(t.clientY-n.top)/n.height*2+1,button:e.button}}}function He(e){if(this.enabled)switch(e.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(e))}}function Ie(e){this.enabled&&(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(e)),this.pointerDown(this._getPointer(e)))}function Ze(e){this.enabled&&this.pointerMove(this._getPointer(e))}function Ce(e){this.enabled&&(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(e)))}function Le(e,t,n){const i=t.intersectObject(e,!0);for(let o=0;o<i.length;o++)if(i[o].object.visible||n)return i[o];return!1}Ye.prototype.isTransformControls=!0;const De=new re,Qe=new be(0,1,0),Re=new be(0,0,0),$e=new pe,Ae=new xe,Oe=new xe,qe=new be,Fe=new pe,We=new be(1,0,0),Ve=new be(0,1,0),Ue=new be(0,0,1),Be=new be,Ge=new be,Ne=new be;class Ke extends we{constructor(){super(),this.type="TransformControlsGizmo";const e=new ue({depthTest:!1,depthWrite:!1,transparent:!0,side:ae,fog:!1,toneMapped:!1}),t=new he({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),n=e.clone();n.opacity=.15;const i=e.clone();i.opacity=.33;const o=e.clone();o.color.set(16711680);const s=e.clone();s.color.set(65280);const a=e.clone();a.color.set(255);const r=e.clone();r.opacity=.25;const l=r.clone();l.color.set(16776960);const c=r.clone();c.color.set(65535);const h=r.clone();h.color.set(16711935);e.clone().color.set(16776960);const p=t.clone();p.color.set(16711680);const d=t.clone();d.color.set(65280);const u=t.clone();u.color.set(255);const w=t.clone();w.color.set(65535);const m=t.clone();m.color.set(16711935);const f=t.clone();f.color.set(16776960);const x=t.clone();x.color.set(7895160);const v=f.clone();v.opacity=.25;const y=new se(0,.05,.2,12,1,!1),g=new ne(.125,.125,.125),b=new ie;function E(e,t){const n=new ie,i=[];for(let o=0;o<=64*t;++o)i.push(0,Math.cos(o/32*Math.PI)*e,Math.sin(o/32*Math.PI)*e);return n.setAttribute("position",new le(i,3)),n}b.setAttribute("position",new le([0,0,0,1,0,0],3));const S={X:[[new de(y,o),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new de(y,o),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new ce(b,p)]],Y:[[new de(y,s),[0,1,0],null,null,"fwd"],[new de(y,s),[0,1,0],[Math.PI,0,0],null,"bwd"],[new ce(b,d),null,[0,0,Math.PI/2]]],Z:[[new de(y,a),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new de(y,a),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new ce(b,u),null,[0,-Math.PI/2,0]]],XYZ:[[new de(new me(.1,0),r.clone()),[0,0,0],[0,0,0]]],XY:[[new de(new fe(.295,.295),l.clone()),[.15,.15,0]],[new ce(b,f),[.18,.3,0],null,[.125,1,1]],[new ce(b,f),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new de(new fe(.295,.295),c.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new ce(b,w),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new ce(b,w),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new de(new fe(.295,.295),h.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new ce(b,m),[.18,0,.3],null,[.125,1,1]],[new ce(b,m),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},M={X:[[new de(new se(.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new de(new se(.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new de(new se(.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new de(new me(.2,0),n)]],XY:[[new de(new fe(.4,.4),n),[.2,.2,0]]],YZ:[[new de(new fe(.4,.4),n),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new de(new fe(.4,.4),n),[.2,0,.2],[-Math.PI/2,0,0]]]},P={START:[[new de(new me(.01,2),i),null,null,null,"helper"]],END:[[new de(new me(.01,2),i),null,null,null,"helper"]],DELTA:[[new ce(function(){const e=new ie;return e.setAttribute("position",new le([0,0,0,1,1,1],3)),e}(),i),null,null,null,"helper"]],X:[[new ce(b,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new ce(b,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new ce(b,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},z={X:[[new ce(E(1,.5),p)],[new de(new me(.04,0),o),[0,0,.99],null,[1,3,1]]],Y:[[new ce(E(1,.5),d),null,[0,0,-Math.PI/2]],[new de(new me(.04,0),s),[0,0,.99],null,[3,1,1]]],Z:[[new ce(E(1,.5),u),null,[0,Math.PI/2,0]],[new de(new me(.04,0),a),[.99,0,0],null,[1,3,1]]],E:[[new ce(E(1.25,1),v),null,[0,Math.PI/2,0]],[new de(new se(.03,0,.15,4,1,!1),v),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new de(new se(.03,0,.15,4,1,!1),v),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new de(new se(.03,0,.15,4,1,!1),v),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new de(new se(.03,0,.15,4,1,!1),v),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new ce(E(1,1),x),null,[0,Math.PI/2,0]]]},T={AXIS:[[new ce(b,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},X={X:[[new de(new ge(1,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new de(new ge(1,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new de(new ge(1,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new de(new ge(1.25,.1,2,24),n)]],XYZE:[[new de(new ye(.7,10,8),n)]]},k={X:[[new de(g,o),[.8,0,0],[0,0,-Math.PI/2]],[new ce(b,p),null,null,[.8,1,1]]],Y:[[new de(g,s),[0,.8,0]],[new ce(b,d),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new de(g,a),[0,0,.8],[Math.PI/2,0,0]],[new ce(b,u),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new de(g,l),[.85,.85,0],null,[2,2,.2]],[new ce(b,f),[.855,.98,0],null,[.125,1,1]],[new ce(b,f),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new de(g,c),[0,.85,.85],null,[.2,2,2]],[new ce(b,w),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new ce(b,w),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new de(g,h),[.85,0,.85],null,[2,.2,2]],[new ce(b,m),[.855,0,.98],null,[.125,1,1]],[new ce(b,m),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new de(new ne(.125,.125,.125),r.clone()),[1.1,0,0]]],XYZY:[[new de(new ne(.125,.125,.125),r.clone()),[0,1.1,0]]],XYZZ:[[new de(new ne(.125,.125,.125),r.clone()),[0,0,1.1]]]},j={X:[[new de(new se(.2,0,.8,4,1,!1),n),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new de(new se(.2,0,.8,4,1,!1),n),[0,.5,0]]],Z:[[new de(new se(.2,0,.8,4,1,!1),n),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new de(g,n),[.85,.85,0],null,[3,3,.2]]],YZ:[[new de(g,n),[0,.85,.85],null,[.2,3,3]]],XZ:[[new de(g,n),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new de(new ne(.2,.2,.2),n),[1.1,0,0]]],XYZY:[[new de(new ne(.2,.2,.2),n),[0,1.1,0]]],XYZZ:[[new de(new ne(.2,.2,.2),n),[0,0,1.1]]]},Y={X:[[new ce(b,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new ce(b,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new ce(b,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function _(e){const t=new we;for(const n in e)for(let i=e[n].length;i--;){const o=e[n][i][0].clone(),s=e[n][i][1],a=e[n][i][2],r=e[n][i][3],l=e[n][i][4];o.name=n,o.tag=l,s&&o.position.set(s[0],s[1],s[2]),a&&o.rotation.set(a[0],a[1],a[2]),r&&o.scale.set(r[0],r[1],r[2]),o.updateMatrix();const c=o.geometry.clone();c.applyMatrix4(o.matrix),o.geometry=c,o.renderOrder=1/0,o.position.set(0,0,0),o.rotation.set(0,0,0),o.scale.set(1,1,1),t.add(o)}return t}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=_(S)),this.add(this.gizmo.rotate=_(z)),this.add(this.gizmo.scale=_(k)),this.add(this.picker.translate=_(M)),this.add(this.picker.rotate=_(X)),this.add(this.picker.scale=_(j)),this.add(this.helper.translate=_(P)),this.add(this.helper.rotate=_(T)),this.add(this.helper.scale=_(Y)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t="local"===("scale"===this.mode?this.space:"local")?this.worldQuaternion:Oe;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let n=[];n=n.concat(this.picker[this.mode].children),n=n.concat(this.gizmo[this.mode].children),n=n.concat(this.helper[this.mode].children);for(let i=0;i<n.length;i++){const e=n[i];let o;if(e.visible=!0,e.rotation.set(0,0,0),e.position.copy(this.worldPosition),o=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),e.scale.set(1,1,1).multiplyScalar(o*this.size/7),"helper"!==e.tag){if(e.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){const n=.99,i=.2,o=0;"X"!==e.name&&"XYZX"!==e.name||Math.abs(Qe.copy(We).applyQuaternion(t).dot(this.eye))>n&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"Y"!==e.name&&"XYZY"!==e.name||Math.abs(Qe.copy(Ve).applyQuaternion(t).dot(this.eye))>n&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"Z"!==e.name&&"XYZZ"!==e.name||Math.abs(Qe.copy(Ue).applyQuaternion(t).dot(this.eye))>n&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"XY"===e.name&&Math.abs(Qe.copy(Ue).applyQuaternion(t).dot(this.eye))<i&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"YZ"===e.name&&Math.abs(Qe.copy(We).applyQuaternion(t).dot(this.eye))<i&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"XZ"===e.name&&Math.abs(Qe.copy(Ve).applyQuaternion(t).dot(this.eye))<i&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),-1!==e.name.search("X")&&(Qe.copy(We).applyQuaternion(t).dot(this.eye)<o?"fwd"===e.tag?e.visible=!1:e.scale.x*=-1:"bwd"===e.tag&&(e.visible=!1)),-1!==e.name.search("Y")&&(Qe.copy(Ve).applyQuaternion(t).dot(this.eye)<o?"fwd"===e.tag?e.visible=!1:e.scale.y*=-1:"bwd"===e.tag&&(e.visible=!1)),-1!==e.name.search("Z")&&(Qe.copy(Ue).applyQuaternion(t).dot(this.eye)<o?"fwd"===e.tag?e.visible=!1:e.scale.z*=-1:"bwd"===e.tag&&(e.visible=!1))}else"rotate"===this.mode&&(Ae.copy(t),Qe.copy(this.eye).applyQuaternion(Pe.copy(t).invert()),-1!==e.name.search("E")&&e.quaternion.setFromRotationMatrix($e.lookAt(this.eye,Re,Ve)),"X"===e.name&&(Pe.setFromAxisAngle(We,Math.atan2(-Qe.y,Qe.z)),Pe.multiplyQuaternions(Ae,Pe),e.quaternion.copy(Pe)),"Y"===e.name&&(Pe.setFromAxisAngle(Ve,Math.atan2(Qe.x,Qe.z)),Pe.multiplyQuaternions(Ae,Pe),e.quaternion.copy(Pe)),"Z"===e.name&&(Pe.setFromAxisAngle(Ue,Math.atan2(Qe.y,Qe.x)),Pe.multiplyQuaternions(Ae,Pe),e.quaternion.copy(Pe)));e.visible=e.visible&&(-1===e.name.indexOf("X")||this.showX),e.visible=e.visible&&(-1===e.name.indexOf("Y")||this.showY),e.visible=e.visible&&(-1===e.name.indexOf("Z")||this.showZ),e.visible=e.visible&&(-1===e.name.indexOf("E")||this.showX&&this.showY&&this.showZ),e.material._opacity=e.material._opacity||e.material.opacity,e.material._color=e.material._color||e.material.color.clone(),e.material.color.copy(e.material._color),e.material.opacity=e.material._opacity,this.enabled?this.axis&&(e.name===this.axis||this.axis.split("").some((function(t){return e.name===t}))?(e.material.opacity=1,e.material.color.lerp(new oe(1,1,1),.5)):(e.material.opacity*=.25,e.material.color.lerp(new oe(1,1,1),.5))):(e.material.opacity*=.5,e.material.color.lerp(new oe(1,1,1),.5))}else e.visible=!1,"AXIS"===e.name?(e.position.copy(this.worldPositionStart),e.visible=!!this.axis,"X"===this.axis&&(Pe.setFromEuler(De.set(0,0,0)),e.quaternion.copy(t).multiply(Pe),Math.abs(Qe.copy(We).applyQuaternion(t).dot(this.eye))>.9&&(e.visible=!1)),"Y"===this.axis&&(Pe.setFromEuler(De.set(0,0,Math.PI/2)),e.quaternion.copy(t).multiply(Pe),Math.abs(Qe.copy(Ve).applyQuaternion(t).dot(this.eye))>.9&&(e.visible=!1)),"Z"===this.axis&&(Pe.setFromEuler(De.set(0,Math.PI/2,0)),e.quaternion.copy(t).multiply(Pe),Math.abs(Qe.copy(Ue).applyQuaternion(t).dot(this.eye))>.9&&(e.visible=!1)),"XYZE"===this.axis&&(Pe.setFromEuler(De.set(0,Math.PI/2,0)),Qe.copy(this.rotationAxis),e.quaternion.setFromRotationMatrix($e.lookAt(Re,Qe,Ve)),e.quaternion.multiply(Pe),e.visible=this.dragging),"E"===this.axis&&(e.visible=!1)):"START"===e.name?(e.position.copy(this.worldPositionStart),e.visible=this.dragging):"END"===e.name?(e.position.copy(this.worldPosition),e.visible=this.dragging):"DELTA"===e.name?(e.position.copy(this.worldPositionStart),e.quaternion.copy(this.worldQuaternionStart),Se.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Se.applyQuaternion(this.worldQuaternionStart.clone().invert()),e.scale.copy(Se),e.visible=this.dragging):(e.quaternion.copy(t),this.dragging?e.position.copy(this.worldPositionStart):e.position.copy(this.worldPosition),this.axis&&(e.visible=-1!==this.axis.search(e.name)))}super.updateMatrixWorld(e)}}Ke.prototype.isTransformControlsGizmo=!0;class Je extends de{constructor(){super(new fe(1e5,1e5,2,2),new ue({visible:!1,wireframe:!0,side:ae,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(t="local"),Be.copy(We).applyQuaternion("local"===t?this.worldQuaternion:Oe),Ge.copy(Ve).applyQuaternion("local"===t?this.worldQuaternion:Oe),Ne.copy(Ue).applyQuaternion("local"===t?this.worldQuaternion:Oe),Qe.copy(Ge),this.mode){case"translate":case"scale":switch(this.axis){case"X":Qe.copy(this.eye).cross(Be),qe.copy(Be).cross(Qe);break;case"Y":Qe.copy(this.eye).cross(Ge),qe.copy(Ge).cross(Qe);break;case"Z":Qe.copy(this.eye).cross(Ne),qe.copy(Ne).cross(Qe);break;case"XY":qe.copy(Ne);break;case"YZ":qe.copy(Be);break;case"XZ":Qe.copy(Ne),qe.copy(Ge);break;case"XYZ":case"E":qe.set(0,0,0)}break;case"rotate":default:qe.set(0,0,0)}0===qe.length()?this.quaternion.copy(this.cameraQuaternion):(Fe.lookAt(Se.set(0,0,0),qe,Qe),this.quaternion.setFromRotationMatrix(Fe)),super.updateMatrixWorld(e)}}Je.prototype.isTransformControlsPlane=!0;const et=window.THREE;class tt extends et.Object3D{constructor(e,n=null){super(),t(this,"animating",!1),t(this,"controls",null),t(this,"render"),t(this,"handleClick"),t(this,"isViewHelper"),t(this,"update"),this.animating=!1,this.controls=null;const i=new et.Color("#ff3653"),o=new et.Color("#8adb00"),s=new et.Color("#2c8fff"),a=[],r=new et.Raycaster,l=new et.Vector2,c=new et.Object3D,h=new et.OrthographicCamera(-2,2,2,-2,0,4);h.position.set(0,0,2);const p=new et.BoxGeometry(.8,.05,.05).translate(.4,0,0),d=new et.Mesh(p,j(i)),u=new et.Mesh(p,j(o)),w=new et.Mesh(p,j(s));u.rotation.z=Math.PI/2,w.rotation.y=-Math.PI/2,this.add(d),this.add(w),this.add(u);const m=new et.Sprite(Y(i,"X"));m.userData.type="posX";const f=new et.Sprite(Y(o,"Y"));f.userData.type="posY";const x=new et.Sprite(Y(s,"Z"));x.userData.type="posZ";const v=new et.Sprite(Y(i));v.userData.type="negX";const y=new et.Sprite(Y(o));y.userData.type="negY";const g=new et.Sprite(Y(s));g.userData.type="negZ",m.position.x=1,f.position.y=1,x.position.z=1,v.position.x=-1,v.scale.setScalar(.8),y.position.y=-1,y.scale.setScalar(.8),g.position.z=-1,g.scale.setScalar(.8),this.add(m),this.add(f),this.add(x),this.add(v),this.add(y),this.add(g),a.push(m),a.push(f),a.push(x),a.push(v),a.push(y),a.push(g);const b=new et.Vector3,E=128,S=2*Math.PI;this.render=function(t){this.quaternion.copy(e.quaternion).invert(),this.updateMatrixWorld(),b.set(0,0,1),b.applyQuaternion(e.quaternion),b.x>=0?(m.material.opacity=1,v.material.opacity=.5):(m.material.opacity=.5,v.material.opacity=1),b.y>=0?(f.material.opacity=1,y.material.opacity=.5):(f.material.opacity=.5,y.material.opacity=1),b.z>=0?(x.material.opacity=1,g.material.opacity=.5):(x.material.opacity=.5,g.material.opacity=1);const i=n.dom.clientWidth-E+(n.dom.width-n.dom.clientWidth);t.clearDepth(),t.setViewport(i,0,E,E),h.updateProjectionMatrix(),t.render(this,h)};const M=new et.Vector3,P=new et.Quaternion,z=new et.Quaternion,T=new et.Quaternion;let X=0,k=n.dom;function j(e){return new et.MeshBasicMaterial({color:e,toneMapped:!1})}function Y(e,t=null){const n=document.createElement("canvas");n.width=64,n.height=64;const i=n.getContext("2d");i.beginPath(),i.arc(32,32,16,0,2*Math.PI),i.closePath(),i.fillStyle=e.getStyle(),i.fill(),null!==t&&(i.font="24px Arial",i.textAlign="center",i.fillStyle="#000000",i.fillText(t,32,41));const o=new et.CanvasTexture(n);return new et.SpriteMaterial({map:o,toneMapped:!1})}D.addListener(Q.onPointerDown,(t=>{let i=n.dom.clientWidth-E,o=n.dom.clientHeight-E,s=t.clientX-k.offsetLeft,p=t.clientY-k.offsetTop;l.x=(s-i)/E*2-1,l.y=-(p-o)/E*2+1,r.setFromCamera(l,h);const d=r.intersectObjects(a);if(d.length>0){return function(t,n){switch(t.userData.type){case"posX":M.set(1,0,0),P.setFromEuler(new et.Euler(0,.5*Math.PI,0));break;case"posY":M.set(0,1,0),P.setFromEuler(new et.Euler(.5*-Math.PI,0,0));break;case"posZ":M.set(0,0,1),P.setFromEuler(new et.Euler);break;case"negX":M.set(-1,0,0),P.setFromEuler(new et.Euler(0,.5*-Math.PI,0));break;case"negY":M.set(0,-1,0),P.setFromEuler(new et.Euler(.5*Math.PI,0,0));break;case"negZ":M.set(0,0,-1),P.setFromEuler(new et.Euler(0,Math.PI,0));break;default:console.error("ViewHelper: Invalid axis.")}X=e.position.distanceTo(n),M.multiplyScalar(X).add(n),c.position.copy(n),c.lookAt(e.position),z.copy(c.quaternion),c.lookAt(M),T.copy(c.quaternion)}(d[0].object,this.controls.center),this.animating=!0,!0}return!1})),this.update=function(t){const n=t*S,i=this.controls.center;z.rotateTowards(T,n),e.position.set(0,0,1).applyQuaternion(z).multiplyScalar(X).add(i),e.quaternion.rotateTowards(P,n),0===z.angleTo(T)&&(this.animating=!1)}}}tt.prototype.isViewHelper=!0;const nt=new Map;let it=100;var ot=Object.defineProperty,st=Object.getOwnPropertyDescriptor;"undefined"!=typeof require&&require;var at,rt;(rt=at||(at={}))[rt.group=0]="group",rt[rt.box=1]="box",rt[rt.sphere=2]="sphere",rt[rt.ambientLight=3]="ambientLight",rt[rt.directionalLight=4]="directionalLight";class lt{create(e){switch(e){case 1:return this.createBox();case 2:return this.createSphere();case 3:return this.createAmbientLight();case 4:return this.createDirectionalLight();default:return null}}createBox(){let e=new THREE.BoxGeometry,t=new THREE.MeshStandardMaterial,n=new THREE.Mesh(e,t);return n.name="Box",{object:n,helper:null}}createSphere(){let e=new THREE.SphereGeometry,t=new THREE.MeshStandardMaterial,n=new THREE.Mesh(e,t);return n.name="Sphere",{object:n,helper:null}}createAmbientLight(){const e=new THREE.AmbientLight(4210752,1);return e.position.set(1,1,1),{object:e,helper:null}}createDirectionalLight(){const e=new THREE.DirectionalLight(16777215,1);e.position.set(5,10,7.5);let t=new THREE.DirectionalLightHelper(e,1);var n=new THREE.SphereGeometry(2,4,2),i=new THREE.MeshBasicMaterial({color:16711680,visible:!1}),o=new THREE.Mesh(n,i);return o.name="picker",o.userData.object=e,t.add(o),{object:e,helper:t}}}t(lt,"inst"),((e,t,n,i)=>{for(var o,s=i>1?void 0:i?st(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i?o(t,n,s):o(s))||s);i&&s&&ot(t,n,s)})([function(e,t){nt.has(e["#instanceId"])||(it++,e["#instanceId"]=it,nt.set(it,new e)),e[t]=nt.get(it)}],lt,"inst",2);const ct=window.THREE;const ht=new class{constructor(){t(this,"renderTime",null),t(this,"renderer",null),t(this,"scene",null),t(this,"camera",null),t(this,"canvas"),t(this,"tanFOV"),t(this,"canvasOldHeight"),t(this,"scenesDirectionHelper"),t(this,"objectControl"),t(this,"scenesControl"),t(this,"raycaster"),t(this,"mouse"),t(this,"objects",[]),t(this,"selectHelper"),t(this,"dt")}init(e){this.canvas||(this.canvas=e,this.raycaster=new ct.Raycaster,this.mouse=new ct.Vector2,this.renderTime=new ct.Clock,this.renderer=new ct.WebGLRenderer({canvas:e,context:e.getContext("webgl2"),alpha:!0,antialias:!0}),this.renderer.setClearColor(11184810),this.scene=new ct.Scene,this.camera=new ct.PerspectiveCamera(50,e.clientWidth/e.clientHeight,.01,1e3),this.camera.position.set(0,5,10),this.camera.lookAt(new ct.Vector3),this.renderer.setAnimationLoop((()=>{this.animate()})),setTimeout((()=>{this.renderer.setSize(e.offsetWidth,e.clientHeight,!1),this.tanFOV=Math.tan(Math.PI/180*this.camera.fov/2),this.canvasOldHeight=e.clientHeight})),this.scenesControl=new te(this.camera,this.canvas),this.scenesControl.addEventListener("change",(()=>{})),this.addFloorGrid(),this.objectControl=this.objectSelect(),this.addScenesDirectionHelper(),D.addListener(Q.resize,this.resize,this),D.addListener(Q.updateScenesSize,this.resize,this),D.addListener(Q.addObject,this.addObject,this),this.addObject(at.box))}addObject(e){let t=lt.inst.create(e);if(t){if(this.scene.add(t.object),t.helper){this.scene.add(t.helper);var n=t.helper.getObjectByName("picker");void 0!==n&&this.objects.push(n)}this.objects.push(t.object)}}addScenesDirectionHelper(){let e=new tt(this.camera,{dom:this.canvas});e.controls=this.scenesControl,this.scenesDirectionHelper=e,D.addListener(Q.update,(()=>{!0===e.animating&&e.update(this.dt)}))}objectSelect(){let e=new Ye(this.camera,this.canvas);this.scene.add(e),e.addEventListener("change",(()=>{O.selectObject.update((e=>e))})),e.addEventListener("dragging-changed",(e=>{this.scenesControl.enabled=!e.value}));let t=new ct.Vector2,n=new ct.Vector2;return D.addListener(Q.onPointerDown,(e=>{e.target==this.canvas&&t.set(e.clientX,e.clientY)})),D.addListener(Q.onPointerUp,(i=>{if(i.target!=this.canvas||!this.objects.length)return;if(n.set(i.clientX,i.clientY),t.distanceTo(n))return;let o=this.getSelectObjectIntersects({x:i.clientX-this.canvas.offsetLeft,y:i.clientY-this.canvas.offsetTop},this.objects);if(o.length>0){let t=o[0].object;void 0!==t.userData.object?(e.attach(t.userData.object),O.selectObject.set(t.userData.object),"picker"===t.name&&(O.selectHelper.set(t.parent),this.selectHelper=t.parent,e.setMode("translate"))):(e.attach(t),O.selectObject.set(t),this.selectHelper=null,O.selectHelper.set(null))}else e.detach(),O.selectObject.set(null),O.selectHelper.set(null),this.selectHelper=null})),D.addListener(Q.onDoubleClick,(e=>{if(e.target!=this.canvas)return;let t=this.getSelectObjectIntersects({x:e.clientX-this.canvas.offsetLeft,y:e.clientY-this.canvas.offsetTop},this.objects);if(t.length>0){let e=t[0].object;this.scenesControl.focus(e)}})),D.addListener(Q.onKeyDown,(t=>{switch(t.key){case"Shift":e.setTranslationSnap(1),e.setRotationSnap(ct.MathUtils.degToRad(15)),e.setScaleSnap(.25);break;case"w":case"W":e.setMode("translate");break;case"e":this.selectHelper||e.setMode("rotate");break;case"r":this.selectHelper||e.setMode("scale");break;case"+":e.setSize(e.size+.1);break;case"-":e.setSize(Math.max(e.size-.1,.1));break;case"X":case"x":e.showX=!e.showX;break;case"y":case"Y":e.showY=!e.showY;break;case"z":case"Z":e.showZ=!e.showZ;break;case" ":e.enabled=!e.enabled}})),D.addListener(Q.onKeyUp,(t=>{switch(t.key){case"Shift":e.setTranslationSnap(null),e.setRotationSnap(null),e.setScaleSnap(null)}})),e}addFloorGrid(){var e=new ct.Group,t=new ct.GridHelper(30,30,12961221);t.material.color.setHex(12961221),t.material.vertexColors=!1,e.add(t);var n=new ct.GridHelper(30,6,7829367);n.material.color.setHex(7829367),n.material.depthFunc=ct.AlwaysDepth,n.material.vertexColors=!1,e.add(n),this.scene.add(e)}getSelectObjectIntersects(e,t){return this.mouse.set(e.x/this.canvas.clientWidth*2-1,-e.y/this.canvas.clientHeight*2+1),this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.intersectObjects(t)}animate(){this.renderer.setViewport(0,0,this.canvas.clientWidth+(this.canvas.width-this.canvas.clientWidth),this.canvas.clientHeight+(this.canvas.height-this.canvas.clientHeight)),this.renderer.render(this.scene,this.camera),this.dt=this.renderTime.getDelta(),this.renderer.autoClear=!1,this.scenesDirectionHelper.render(this.renderer),this.renderer.autoClear=!0,D.emit(Q.update,this.dt),this.camera.updateProjectionMatrix()}resize(){this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight,!1),this.camera.aspect=this.canvas.clientWidth/this.canvas.clientHeight,this.camera.fov=360/Math.PI*Math.atan(this.tanFOV*(this.canvas.clientHeight/this.canvasOldHeight)),this.camera.updateProjectionMatrix()}};function pt(e){let t;return{c(){t=d("canvas"),m(t,"class","h-full w-full flex-grow select-none")},m(n,i){f(n,t,i),e[1](t)},p:H,i:H,o:H,d(n){n&&E(t),e[1](null)}}}function dt(e,t,n){let i;return I((()=>{ht.init(i)})),[i,function(e){Z[e?"unshift":"push"]((()=>{i=e,n(0,i)}))}]}class ut extends o{constructor(e){super(),s(this,e,dt,pt,a,{})}}function wt(e){let t,n,i;return{c(){t=d("div"),m(t,"class","hover:bg-yellow-300 transition-colors duration-50 h-full w-2 cursor-col-resize -translate-x-1 absolute left-0 top-0 select-none")},m(o,s){f(o,t,s),e[6](t),n||(i=[v(window,"mouseup",e[3]),v(window,"mousemove",e[2]),v(t,"mousedown",e[1])],n=!0)},p:H,i:H,o:H,d(o){o&&E(t),e[6](null),n=!1,X(i)}}}function mt(e,t,n){let i=null,o=!1,s=0,a=0,{resizeEvent:r=null}=t,{resizeEventMouseUp:l=null}=t;return I((()=>{})),e.$$set=e=>{"resizeEvent"in e&&n(4,r=e.resizeEvent),"resizeEventMouseUp"in e&&n(5,l=e.resizeEventMouseUp)},[i,function(e){o=!0,s=e.pageX,a=i.parentElement.clientWidth},function(e){if(o){let t=a+s-e.pageX;(document.documentElement.clientWidth-t<50||document.documentElement.clientWidth-t>document.documentElement.clientWidth-50)&&(t=i.parentElement.clientWidth),n(0,i.parentElement.style.width=`${t}px`,i),r&&r()}},function(e){l&&o&&l(),o=!1},r,l,function(e){Z[e?"unshift":"push"]((()=>{i=e,n(0,i)}))}]}class ft extends o{constructor(e){super(),s(this,e,mt,wt,a,{resizeEvent:4,resizeEventMouseUp:5})}}const xt=[{title:"文件",child:[{title:"文件",event:()=>{console.log(1)},line:!1,enabled:!1},{title:"导入",event:()=>{console.log(1)},line:!1,enabled:!1}]},{title:"编辑",child:[{title:"拷贝",event:()=>{console.log(1)},line:!1,enabled:!1},{title:"删除",event:()=>{console.log(1)},line:!1,enabled:!1}]},{title:"添加",child:[{title:"组",event:()=>{D.emit(Q.addObject,at.group)},line:!0,enabled:!1},{title:"正方体",event:()=>{D.emit(Q.addObject,at.box)},line:!1,enabled:!0},{title:"圆",event:()=>{D.emit(Q.addObject,at.sphere)},line:!0,enabled:!0},{title:"环境光",event:()=>{D.emit(Q.addObject,at.ambientLight)},enabled:!1},{title:"平行光",event:()=>{D.emit(Q.addObject,at.directionalLight)},line:!1,enabled:!0},{title:"半光球",event:()=>{console.log(1)},line:!1},{title:"点光源",event:()=>{console.log(1)},line:!1}]},{title:"帮助",child:[]}];function vt(e,t,n){const i=e.slice();return i[9]=t[n],i}function yt(e,t,n){const i=e.slice();return i[9]=t[n],i[13]=n,i}function gt(e){let t,n,i,o,s,a=e[9].title+"";function r(...t){return e[6](e[13],...t)}return{c(){t=d("div"),n=u(a),i=w(),m(t,"class","hover:bg-gray-300 hover:text-gray-600 inline-block px-3 cursor-pointer text-gray-500 float-left")},m(a,l){f(a,t,l),x(t,n),x(t,i),o||(s=[v(t,"mouseenter",r),v(t,"mouseleave",e[5])],o=!0)},p(t,n){e=t},d(e){e&&E(t),o=!1,X(s)}}}function bt(e){let t,n=e[3][e[2]].child,i=[];for(let o=0;o<n.length;o+=1)i[o]=St(vt(e,n,o));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=P()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);f(e,t,n)},p(e,o){if(12&o){let s;for(n=e[3][e[2]].child,s=0;s<n.length;s+=1){const a=vt(e,n,s);i[s]?i[s].p(a,o):(i[s]=St(a),i[s].c(),i[s].m(t.parentNode,t))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(e){L(i,e),e&&E(t)}}}function Et(e){let t;return{c(){t=d("div"),t.innerHTML="<div></div> \n                        <div></div> \n                    ",m(t,"class","divide-y divide-gray-300")},m(e,n){f(e,t,n)},d(e){e&&E(t)}}}function St(e){let t,n,i,o,s,a,r,l=e[9].title+"",c=e[9].line&&Et();return{c(){t=d("div"),n=u(l),o=w(),c&&c.c(),s=P(),m(t,"class",i=(e[9].enabled?"hover:bg-pink-800 hover:text-white cursor-pointer ":" cursor-not-allowed  text-gray-300")+" px-2 py-1")},m(i,l){f(i,t,l),x(t,n),f(i,o,l),c&&c.m(i,l),f(i,s,l),a||(r=v(t,"click",(function(){C(e[9].enabled?e[9].event:null)&&(e[9].enabled?e[9].event:null).apply(this,arguments)})),a=!0)},p(o,a){e=o,4&a&&l!==(l=e[9].title+"")&&y(n,l),4&a&&i!==(i=(e[9].enabled?"hover:bg-pink-800 hover:text-white cursor-pointer ":" cursor-not-allowed  text-gray-300")+" px-2 py-1")&&m(t,"class",i),e[9].line?c||(c=Et(),c.c(),c.m(s.parentNode,s)):c&&(c.d(1),c=null)},d(e){e&&E(t),e&&E(o),c&&c.d(e),e&&E(s),a=!1,r()}}}function Mt(e){var t;let n,i,o,s,a,r,l=e[3],c=[];for(let p=0;p<l.length;p+=1)c[p]=gt(yt(e,l,p));let h=e[3][e[2]]&&(null==(t=e[3][e[2]].child)?void 0:t.length)&&e[1]&&bt(e);return{c(){n=d("div"),i=d("div");for(let e=0;e<c.length;e+=1)c[e].c();o=w(),s=d("div"),h&&h.c(),m(i,"class","overflow-hidden leading-6"),m(s,"class","w-40 absolute bg-gray-200 transition-transform duration-100 "),m(n,"class","relative select-none ")},m(t,l){f(t,n,l),x(n,i);for(let e=0;e<c.length;e+=1)c[e].m(i,null);x(n,o),x(n,s),h&&h.m(s,null),e[7](s),a||(r=[v(s,"mouseenter",e[8]),v(s,"mouseleave",e[5])],a=!0)},p(e,[t]){var n;if(56&t){let n;for(l=e[3],n=0;n<l.length;n+=1){const o=yt(e,l,n);c[n]?c[n].p(o,t):(c[n]=gt(o),c[n].c(),c[n].m(i,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}e[3][e[2]]&&(null==(n=e[3][e[2]].child)?void 0:n.length)&&e[1]?h?h.p(e,t):(h=bt(e),h.c(),h.m(s,null)):h&&(h.d(1),h=null)},i:H,o:H,d(t){t&&E(n),L(c,t),h&&h.d(),e[7](null),a=!1,X(r)}}}function Pt(e,t,n){let i,o=!1,s=xt,a=null;function r(e,t){if(n(1,o=!0),n(2,a=t),!s[t].child.length)return;let r=e.target;n(0,i.style.transform=`translateX(${r.offsetLeft}px)`,i)}return[i,o,a,s,r,function(){n(1,o=!1)},(e,t)=>{r(t,e)},function(e){Z[e?"unshift":"push"]((()=>{i=e,n(0,i)}))},e=>{n(1,o=!0)}]}class zt extends o{constructor(e){super(),s(this,e,Pt,Mt,a,{})}}function Tt(e){let t,n,i,o,s,a,r,l,c,u,v,y,g,b,S;return i=new zt({}),r=new ut({}),u=new ft({props:{resizeEventMouseUp:e[0]}}),y=new J({}),{c(){t=d("div"),n=d("div"),M(i.$$.fragment),o=w(),s=d("div"),a=d("div"),M(r.$$.fragment),l=w(),c=d("div"),M(u.$$.fragment),v=w(),M(y.$$.fragment),g=w(),b=d("div"),b.innerHTML='<span class="text-xs">0</span>',m(n,"class","flex-none items-center bg-gray-200 align-text-bottom border-b-[1px] border-solid border-gray-300"),m(a,"class","flex-grow bg-gray-100 flex flex-row"),m(c,"class","flex-none bg-gray-200 w-80 relative "),m(s,"class","flex-grow h-4 flex flex-row"),m(b,"class","flex-none bg-gray-200 px-2 h-6 align-text-bottom border-t-[1px] border-solid border-gray-300"),m(t,"class","flex flex-col h-screen text-gray-500 font-sans text-sm")},m(e,h){f(e,t,h),x(t,n),z(i,n,null),x(t,o),x(t,s),x(s,a),z(r,a,null),x(s,l),x(s,c),z(u,c,null),x(c,v),z(y,c,null),x(t,g),x(t,b),S=!0},p:H,i(e){S||(h(i.$$.fragment,e),h(r.$$.fragment,e),h(u.$$.fragment,e),h(y.$$.fragment,e),S=!0)},o(e){p(i.$$.fragment,e),p(r.$$.fragment,e),p(u.$$.fragment,e),p(y.$$.fragment,e),S=!1},d(e){e&&E(t),T(i),T(r),T(u),T(y)}}}function Xt(e){return[function(){D.emit(Q.updateScenesSize)}]}class kt extends o{constructor(e){super(),s(this,e,Xt,Tt,a,{})}}function jt(e){let t,n,i,o;return t=new kt({}),{c(){M(t.$$.fragment)},m(s,a){z(t,s,a),n=!0,i||(o=[v(window,"resize",e[0]),v(window,"pointerdown",e[1]),v(window,"pointerup",e[2]),v(window,"pointermove",e[3]),v(window,"dblclick",e[4]),v(window,"keydown",e[5]),v(window,"keyup",e[6])],i=!0)},p:H,i(e){n||(h(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){T(t,e),i=!1,X(o)}}}function Yt(e){return[function(){D.emit(Q.resize)},function(e){D.emit(Q.onPointerDown,e)},function(e){D.emit(Q.onPointerUp,e)},function(e){D.emit(Q.onPointerMove,e)},function(e){D.emit(Q.onDoubleClick,e)},function(e){D.emit(Q.onKeyDown,e)},function(e){D.emit(Q.onKeyUp,e)}]}new class extends o{constructor(e){super(),s(this,e,Yt,jt,a,{})}}({target:document.getElementById("app")});
